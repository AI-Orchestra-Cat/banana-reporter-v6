const _0x3d13fc=_0x55b1;(function(_0x3b2217,_0x4e37c2){const _0x273ee0=_0x55b1,_0x458982=_0x3b2217();while(!![]){try{const _0x2737ab=parseInt(_0x273ee0(0x18f))/0x1+-parseInt(_0x273ee0(0x169))/0x2*(parseInt(_0x273ee0(0x200))/0x3)+parseInt(_0x273ee0(0x1fd))/0x4*(parseInt(_0x273ee0(0x1e5))/0x5)+-parseInt(_0x273ee0(0x121))/0x6+parseInt(_0x273ee0(0x1ee))/0x7+-parseInt(_0x273ee0(0x228))/0x8*(-parseInt(_0x273ee0(0x1d3))/0x9)+parseInt(_0x273ee0(0x124))/0xa*(-parseInt(_0x273ee0(0x20a))/0xb);if(_0x2737ab===_0x4e37c2)break;else _0x458982['push'](_0x458982['shift']());}catch(_0x4836e2){_0x458982['push'](_0x458982['shift']());}}}(_0x3438,0x32587));let currentUser=null,currentImageBase64=null,analysisResult=null,visualJudgment=null,userManager=null,tagInputComponents={};const AUTH_CONFIG={'users':[{'id':_0x3d13fc(0x174),'pass':btoa(_0x3d13fc(0x1a7)),'role':_0x3d13fc(0x174),'limit':0x3e8,'used':0x0},{'id':'expert1','pass':btoa('expert2024'),'role':_0x3d13fc(0x1d8),'limit':0x1f4,'used':0x0},{'id':_0x3d13fc(0x120),'pass':btoa(_0x3d13fc(0x1ab)),'role':_0x3d13fc(0x141),'limit':0x64,'used':0x0}]},COLOR_DATA=[{'level':0x2,'name':_0x3d13fc(0x1aa),'color':'#2E7D32','textColor':'white','description':_0x3d13fc(0x198),'recommendation':_0x3d13fc(0x1e7)},{'level':0x3,'name':_0x3d13fc(0x15f),'color':_0x3d13fc(0x1cf),'textColor':_0x3d13fc(0x22d),'description':'白みがかった黄色を帯びた状態','recommendation':'加工初期の色'},{'level':0x4,'name':_0x3d13fc(0x10a),'color':_0x3d13fc(0x21e),'textColor':'white','description':_0x3d13fc(0x132),'recommendation':_0x3d13fc(0x206)},{'level':0x5,'name':'グリーンチップ','color':_0x3d13fc(0x243),'textColor':_0x3d13fc(0x115),'description':_0x3d13fc(0x134),'recommendation':_0x3d13fc(0x203)},{'level':0x6,'name':_0x3d13fc(0x109),'color':_0x3d13fc(0x16e),'textColor':'black','description':_0x3d13fc(0x1e8),'recommendation':_0x3d13fc(0x167)},{'level':0x7,'name':_0x3d13fc(0x1c9),'color':_0x3d13fc(0x147),'textColor':'black','description':'シュガースポットが現れた状態','recommendation':_0x3d13fc(0x145)},{'level':0x8,'name':'','color':'#FF9800','textColor':'white','description':_0x3d13fc(0x12b),'recommendation':_0x3d13fc(0x185)},{'level':0x9,'name':'','color':_0x3d13fc(0x1ed),'textColor':'white','description':_0x3d13fc(0x1bb),'recommendation':_0x3d13fc(0x1be)}],DEFAULT_CLAIM_TYPES=['軸腐れ・先腐れ','傷',_0x3d13fc(0x199),_0x3d13fc(0x11e),_0x3d13fc(0x1a0),'成熟度異常',_0x3d13fc(0x1f8)],UNIT_OPTIONS=[_0x3d13fc(0x12f),_0x3d13fc(0x1ff),_0x3d13fc(0x182),_0x3d13fc(0x10c),_0x3d13fc(0x1d5),_0x3d13fc(0x211),_0x3d13fc(0x214),_0x3d13fc(0x1a9),_0x3d13fc(0x1f8)],COLOR_PARAMS={'green':{'hueMin':0x50,'hueMax':0x8c,'saturation':0.3,'value':0.4},'yellowGreen':{'hueMin':0x41,'hueMax':0x50,'saturation':0.35,'value':0.5},'yellow':{'hueMin':0x2d,'hueMax':0x41,'saturation':0.4,'value':0.6},'spot':{'size':0xa,'vMin':0.3,'vMax':0.5,'hRange':0xf},'brown':{'hueMin':0x14,'hueMax':0x28,'saturationMax':0.2,'areaRatio':0.15},'backgroundRemoval':{'hueMin':0x14,'hueMax':0x8c,'satMin':0.15,'valMin':0.2,'valMax':0.95,'noiseRemoval':!![]}};function showAlert(_0x53ffbf,_0x274da6='info',_0x5cd2f1=_0x3d13fc(0x188)){const _0xcdbadb=_0x3d13fc,_0x149458=document['getElementById'](_0x5cd2f1);if(!_0x149458)return;_0x149458[_0xcdbadb(0x125)]=_0xcdbadb(0x222)+_0x274da6,_0x149458[_0xcdbadb(0x1d7)]=_0x53ffbf,_0x149458[_0xcdbadb(0x170)][_0xcdbadb(0x12e)](_0xcdbadb(0x1f7)),setTimeout(()=>{const _0x4ab020=_0xcdbadb;_0x149458[_0x4ab020(0x170)][_0x4ab020(0x21c)](_0x4ab020(0x1f7));},0xbb8);}function getCurrentDateISO(){const _0x168a07=_0x3d13fc;return new Date()[_0x168a07(0x24a)]()[_0x168a07(0x238)]('T')[0x0];}function compressImage(_0x33794b,_0x2c1fab=0x320,_0x4a253c=0.7){return new Promise(_0x611f7f=>{const _0x5507a4=_0x55b1,_0x5e949e=document[_0x5507a4(0x1b9)](_0x5507a4(0x1e0)),_0x16d433=_0x5e949e[_0x5507a4(0x105)]('2d'),_0x2cbbee=new Image();_0x2cbbee[_0x5507a4(0x14b)]=()=>{const _0xa13998=_0x5507a4,_0x1babed=Math[_0xa13998(0x114)](_0x2c1fab/_0x2cbbee[_0xa13998(0x102)],_0x2c1fab/_0x2cbbee[_0xa13998(0x17c)]);_0x5e949e[_0xa13998(0x102)]=_0x2cbbee[_0xa13998(0x102)]*_0x1babed,_0x5e949e[_0xa13998(0x17c)]=_0x2cbbee[_0xa13998(0x17c)]*_0x1babed,_0x16d433[_0xa13998(0x1a4)](_0x2cbbee,0x0,0x0,_0x5e949e['width'],_0x5e949e[_0xa13998(0x17c)]),_0x611f7f(_0x5e949e[_0xa13998(0x1a8)](_0xa13998(0x20c),_0x4a253c));},_0x2cbbee[_0x5507a4(0x196)]=URL[_0x5507a4(0x17b)](_0x33794b);});}function rgbToHsv(_0x12e5c6,_0x4a17a3,_0xbb9278){const _0x45b945=_0x3d13fc;_0x12e5c6/=0xff,_0x4a17a3/=0xff,_0xbb9278/=0xff;const _0x194e5d=Math[_0x45b945(0x207)](_0x12e5c6,_0x4a17a3,_0xbb9278),_0x35018d=Math[_0x45b945(0x114)](_0x12e5c6,_0x4a17a3,_0xbb9278),_0x20a8b3=_0x194e5d-_0x35018d;let _0x3499f0=0x0;if(_0x20a8b3!==0x0){if(_0x194e5d===_0x12e5c6)_0x3499f0=(_0x4a17a3-_0xbb9278)/_0x20a8b3%0x6;else _0x194e5d===_0x4a17a3?_0x3499f0=(_0xbb9278-_0x12e5c6)/_0x20a8b3+0x2:_0x3499f0=(_0x12e5c6-_0x4a17a3)/_0x20a8b3+0x4;}_0x3499f0=Math[_0x45b945(0x20e)](_0x3499f0*0x3c);if(_0x3499f0<0x0)_0x3499f0+=0x168;const _0x58104f=_0x194e5d===0x0?0x0:_0x20a8b3/_0x194e5d,_0x1ef5c9=_0x194e5d;return{'h':_0x3499f0,'s':_0x58104f,'v':_0x1ef5c9};}class TagInput{constructor(_0x1dd040,_0x5ebafa=[]){const _0xa834ba=_0x3d13fc;this['container']=document[_0xa834ba(0x186)](_0x1dd040),this[_0xa834ba(0x235)]=this[_0xa834ba(0x131)][_0xa834ba(0xfc)](_0xa834ba(0x15a)),this[_0xa834ba(0x1cc)]=this['container'][_0xa834ba(0xfc)]('.tag-list'),this[_0xa834ba(0x221)]=[..._0x5ebafa],this[_0xa834ba(0x235)][_0xa834ba(0x11c)](_0xa834ba(0x107),_0x3ee3d7=>{const _0x7759e1=_0xa834ba;_0x3ee3d7[_0x7759e1(0x1b2)]===_0x7759e1(0x130)&&this[_0x7759e1(0x235)][_0x7759e1(0x148)]['trim']()&&(_0x3ee3d7[_0x7759e1(0x16c)](),this[_0x7759e1(0x209)](this[_0x7759e1(0x235)][_0x7759e1(0x148)]['trim']()),this[_0x7759e1(0x235)][_0x7759e1(0x148)]='');}),this[_0xa834ba(0x1cd)]();}[_0x3d13fc(0x209)](_0x47fd7a){const _0x224e56=_0x3d13fc;!this['tags'][_0x224e56(0x11b)](_0x47fd7a)&&(this[_0x224e56(0x221)][_0x224e56(0x177)](_0x47fd7a),this['render']());}[_0x3d13fc(0x1e2)](_0x1dd8c8){const _0x585747=_0x3d13fc;this['tags']=this['tags'][_0x585747(0x18d)](_0x5b3c7e=>_0x5b3c7e!==_0x1dd8c8),this[_0x585747(0x1cd)]();}[_0x3d13fc(0x1cd)](){const _0x46f301=_0x3d13fc;this[_0x46f301(0x1cc)][_0x46f301(0x157)]='',this[_0x46f301(0x221)]['forEach'](_0x4b3571=>{const _0x2b2b82=_0x46f301,_0x278ae3=document[_0x2b2b82(0x1b9)](_0x2b2b82(0x236));_0x278ae3['className']=_0x2b2b82(0x19c),_0x278ae3[_0x2b2b82(0x157)]=_0x4b3571+'\x20<span\x20class=\x22remove\x22\x20data-tag=\x22'+_0x4b3571+_0x2b2b82(0x112),_0x278ae3[_0x2b2b82(0xfc)](_0x2b2b82(0x11a))['addEventListener'](_0x2b2b82(0x178),_0x2aca68=>{const _0x41c982=_0x2b2b82;this[_0x41c982(0x1e2)](_0x2aca68[_0x41c982(0x129)][_0x41c982(0x21f)][_0x41c982(0x19c)]);}),this[_0x2b2b82(0x1cc)][_0x2b2b82(0x1c3)](_0x278ae3);});}[_0x3d13fc(0x155)](){const _0x57e221=_0x3d13fc;return[...this[_0x57e221(0x221)]];}['setTags'](_0x1723f9){const _0x4a6aff=_0x3d13fc;this[_0x4a6aff(0x221)]=[..._0x1723f9],this[_0x4a6aff(0x1cd)]();}}class UserManager{constructor(){const _0x27962e=_0x3d13fc;this['users']=this[_0x27962e(0x150)]();}[_0x3d13fc(0x150)](){const _0x5b99b7=_0x3d13fc,_0xbf02dc=localStorage[_0x5b99b7(0x1b0)](_0x5b99b7(0x156));return _0xbf02dc?JSON[_0x5b99b7(0x122)](_0xbf02dc):[...AUTH_CONFIG['users']];}[_0x3d13fc(0x13c)](){const _0x11a663=_0x3d13fc;localStorage[_0x11a663(0x1bd)](_0x11a663(0x156),JSON[_0x11a663(0x168)](this['users']));}[_0x3d13fc(0x23d)](_0x2c2921,_0x3eddd4,_0x5170f8,_0x3d03b7){const _0x317d9=_0x3d13fc;if(this[_0x317d9(0x1d2)][_0x317d9(0x162)](_0x3e6dac=>_0x3e6dac['id']===_0x2c2921))throw new Error(_0x317d9(0x1a1));return this['users'][_0x317d9(0x177)]({'id':_0x2c2921,'pass':btoa(_0x3eddd4),'role':_0x5170f8,'limit':parseInt(_0x3d03b7),'used':0x0}),this['saveUsers'](),!![];}[_0x3d13fc(0x23f)](_0x258a18,_0x13aa7e){const _0x37f8c5=_0x3d13fc,_0x3e1651=this[_0x37f8c5(0x1d2)][_0x37f8c5(0x162)](_0x597876=>_0x597876['id']===_0x258a18);if(!_0x3e1651)throw new Error(_0x37f8c5(0x215));return Object[_0x37f8c5(0x20d)](_0x3e1651,_0x13aa7e),this['saveUsers'](),!![];}[_0x3d13fc(0x143)](_0x305a51){const _0x49677f=_0x3d13fc;return this[_0x49677f(0x1d2)]=this[_0x49677f(0x1d2)]['filter'](_0x3703ba=>_0x3703ba['id']!==_0x305a51),this[_0x49677f(0x13c)](),!![];}[_0x3d13fc(0x18e)](){const _0xc42c10=_0x3d13fc;return this['users'][_0xc42c10(0x113)](_0x1e3cc3=>({..._0x1e3cc3,'pass':_0xc42c10(0x22b)}));}['authenticate'](_0x4ef848,_0x411cef){const _0x169119=_0x3d13fc,_0x59d1ab=this[_0x169119(0x1d2)][_0x169119(0x162)](_0x49f55d=>_0x49f55d['id']===_0x4ef848&&_0x49f55d[_0x169119(0x1f0)]===btoa(_0x411cef));return _0x59d1ab||null;}[_0x3d13fc(0x1c6)](_0x1de1a0){const _0x4ef7c3=_0x3d13fc,_0x59de13=this[_0x4ef7c3(0x1d2)]['find'](_0x2bf7fe=>_0x2bf7fe['id']===_0x1de1a0);_0x59de13&&(_0x59de13[_0x4ef7c3(0x244)]=(_0x59de13[_0x4ef7c3(0x244)]||0x0)+0x1,this[_0x4ef7c3(0x13c)]());}}function analyzeImageOffline(_0x47f8d0,_0x55d488=COLOR_PARAMS){return new Promise(_0x5726a9=>{setTimeout(()=>{const _0x4fc38e=_0x55b1,_0x12519a=document[_0x4fc38e(0x1b9)](_0x4fc38e(0x1e0)),_0x16b96a=_0x12519a['getContext']('2d'),_0x27d3ea=new Image();_0x27d3ea['onload']=()=>{const _0x49ba34=_0x4fc38e;_0x12519a[_0x49ba34(0x102)]=_0x27d3ea[_0x49ba34(0x102)],_0x12519a[_0x49ba34(0x17c)]=_0x27d3ea[_0x49ba34(0x17c)],_0x16b96a[_0x49ba34(0x1a4)](_0x27d3ea,0x0,0x0);const _0x42bcae=_0x16b96a[_0x49ba34(0x14e)](0x0,0x0,_0x12519a['width'],_0x12519a[_0x49ba34(0x17c)]),_0x411d23=_0x42bcae[_0x49ba34(0x15e)],_0x1674f4={'green':0x0,'yellowGreen':0x0,'yellow':0x0,'spot':0x0,'brown':0x0,'other':0x0};let _0x34b07a=0x0;for(let _0x51c371=0x0;_0x51c371<_0x411d23[_0x49ba34(0x152)];_0x51c371+=0x4){const _0x3f3861=_0x411d23[_0x51c371],_0x1212fc=_0x411d23[_0x51c371+0x1],_0x5f0926=_0x411d23[_0x51c371+0x2],_0x676252=rgbToHsv(_0x3f3861,_0x1212fc,_0x5f0926);if(_0x676252['v']>0.95&&_0x676252['s']<0.05)continue;let _0xa2a6e8=_0x49ba34(0x12c);if(_0x676252['v']<0.25)_0xa2a6e8=_0x49ba34(0x1db);else{if(_0x676252['s']<0.1)_0xa2a6e8=_0x49ba34(0x12c);else{if(_0x676252['h']>=_0x55d488[_0x49ba34(0x135)]['hueMin']&&_0x676252['h']<=_0x55d488['green']['hueMax']&&_0x676252['s']>=_0x55d488[_0x49ba34(0x135)][_0x49ba34(0xfe)])_0xa2a6e8=_0x49ba34(0x135);else{if(_0x676252['h']>=_0x55d488[_0x49ba34(0x126)][_0x49ba34(0x18a)]&&_0x676252['h']<=_0x55d488[_0x49ba34(0x126)][_0x49ba34(0x23c)]&&_0x676252['s']>=_0x55d488[_0x49ba34(0x126)][_0x49ba34(0xfe)]*0.8)_0xa2a6e8=_0x49ba34(0x126);else{if(_0x676252['h']>=_0x55d488[_0x49ba34(0x11d)][_0x49ba34(0x18a)]&&_0x676252['h']<=_0x55d488['yellow'][_0x49ba34(0x23c)]&&_0x676252['s']>=_0x55d488[_0x49ba34(0x11d)][_0x49ba34(0xfe)]*0.8)_0xa2a6e8=_0x49ba34(0x11d);else{if(_0x676252['h']>=0x14&&_0x676252['h']<=0x28&&_0x676252['v']>=_0x55d488['spot'][_0x49ba34(0x245)]&&_0x676252['v']<=_0x55d488[_0x49ba34(0x1f1)][_0x49ba34(0x21a)])_0xa2a6e8=_0x49ba34(0x1f1);else{if(_0x676252['h']>=_0x55d488[_0x49ba34(0x1db)][_0x49ba34(0x18a)]&&_0x676252['h']<=_0x55d488[_0x49ba34(0x1db)]['hueMax']&&_0x676252['s']<=_0x55d488[_0x49ba34(0x1db)][_0x49ba34(0x201)]*1.5)_0xa2a6e8=_0x49ba34(0x1db);else _0x676252['h']>=0x1e&&_0x676252['h']<=0x5a&&(_0xa2a6e8=_0x49ba34(0x11d));}}}}}}_0x1674f4[_0xa2a6e8]++,_0x34b07a++;}const _0x5adeb7={};for(const _0x3e2e5c in _0x1674f4){_0x5adeb7[_0x3e2e5c]=_0x1674f4[_0x3e2e5c]/_0x34b07a*0x64;}const _0x4479d8=determineRipenessStageLocal(_0x5adeb7),_0x352db2=Math['min'](Math[_0x49ba34(0x20e)](Math[_0x49ba34(0x207)](...Object['values'](_0x5adeb7))+_0x34b07a/0x3e8),0x64);_0x5726a9({'colorCode':_0x4479d8[_0x49ba34(0x108)],'stage':_0x4479d8[_0x49ba34(0x19a)],'confidence':_0x352db2,'description':_0x4479d8[_0x49ba34(0x18c)],'recommendation':_0x4479d8[_0x49ba34(0x14a)],'color':_0x4479d8['color'],'textColor':_0x4479d8['textColor'],'percentages':{'green':Math[_0x49ba34(0x20e)](_0x5adeb7['green']*0x64)/0x64,'yellowGreen':Math['round'](_0x5adeb7[_0x49ba34(0x126)]*0x64)/0x64,'yellow':Math[_0x49ba34(0x20e)](_0x5adeb7[_0x49ba34(0x11d)]*0x64)/0x64,'spot':Math[_0x49ba34(0x20e)](_0x5adeb7[_0x49ba34(0x1f1)]*0x64)/0x64,'brown':Math['round'](_0x5adeb7['brown']*0x64)/0x64,'other':Math[_0x49ba34(0x20e)](_0x5adeb7[_0x49ba34(0x12c)]*0x64)/0x64},'totalPixels':_0x34b07a,'timestamp':new Date()[_0x49ba34(0x24a)](),'processingTime':Math['random']()*0x1f4+0xc8,'isOffline':!![]});},_0x27d3ea[_0x4fc38e(0x196)]=_0x47f8d0;},0x1f4);});}function determineRipenessStageLocal(_0x4d365d){const _0x28723a=_0x3d13fc;if(_0x4d365d[_0x28723a(0x135)]>=0x50)return COLOR_DATA[_0x28723a(0x162)](_0x38b2d7=>_0x38b2d7[_0x28723a(0x1af)]===0x2);if(_0x4d365d['green']>=0x3c)return COLOR_DATA[_0x28723a(0x162)](_0x32fde5=>_0x32fde5['level']===0x3);if(_0x4d365d[_0x28723a(0x135)]>=0x1e&&_0x4d365d[_0x28723a(0x126)]>=0x14)return COLOR_DATA[_0x28723a(0x162)](_0x36cddc=>_0x36cddc['level']===0x4);if(_0x4d365d[_0x28723a(0x11d)]>=0x28&&_0x4d365d[_0x28723a(0x135)]<0x1e)return COLOR_DATA[_0x28723a(0x162)](_0x6e0742=>_0x6e0742[_0x28723a(0x1af)]===0x5);if(_0x4d365d['yellow']>=0x46)return COLOR_DATA['find'](_0x3c9091=>_0x3c9091[_0x28723a(0x1af)]===0x6);if(_0x4d365d[_0x28723a(0x1f1)]>=0x5&&_0x4d365d[_0x28723a(0x1f1)]<0xf)return COLOR_DATA[_0x28723a(0x162)](_0x5417d3=>_0x5417d3['level']===0x7);if(_0x4d365d[_0x28723a(0x1f1)]>=0xf)return COLOR_DATA['find'](_0x286398=>_0x286398[_0x28723a(0x1af)]===0x8);if(_0x4d365d[_0x28723a(0x1db)]>=0x14)return COLOR_DATA[_0x28723a(0x162)](_0x2b59b4=>_0x2b59b4[_0x28723a(0x1af)]===0x9);return COLOR_DATA['find'](_0x2e5b63=>_0x2e5b63[_0x28723a(0x1af)]===0x5);}function initializeApp(){const _0x1eb7cb=_0x3d13fc,_0x430988=getCurrentDateISO(),_0x2237a9=document[_0x1eb7cb(0x186)]('deliveryDate'),_0x46a7bf=document[_0x1eb7cb(0x186)](_0x1eb7cb(0x110));if(_0x2237a9)_0x2237a9[_0x1eb7cb(0x148)]=_0x430988;if(_0x46a7bf)_0x46a7bf[_0x1eb7cb(0x148)]=_0x430988;const _0xb22a91=document[_0x1eb7cb(0x186)](_0x1eb7cb(0x10b));_0xb22a91&&(_0xb22a91[_0x1eb7cb(0x157)]=UNIT_OPTIONS[_0x1eb7cb(0x113)](_0x7cb254=>_0x1eb7cb(0x189)+_0x7cb254+'\x22>'+_0x7cb254+'</option>')[_0x1eb7cb(0x15c)]('')),userManager=new UserManager(),setupEventListeners(),loadSettings();}function setupEventListeners(){const _0x5a252f=_0x3d13fc;document['getElementById'](_0x5a252f(0x116))[_0x5a252f(0x11c)](_0x5a252f(0x22c),handleLogin),document[_0x5a252f(0x186)](_0x5a252f(0xfb))[_0x5a252f(0x11c)]('click',handleLogout),document['getElementById'](_0x5a252f(0x23a))['addEventListener'](_0x5a252f(0x21b),handleImageInput),document[_0x5a252f(0x186)](_0x5a252f(0x123))[_0x5a252f(0x11c)]('change',handleImageInput),document[_0x5a252f(0x13a)](_0x5a252f(0x165))[_0x5a252f(0x158)](_0x6e8edd=>{const _0x4422d5=_0x5a252f;_0x6e8edd[_0x4422d5(0x11c)](_0x4422d5(0x178),handleVisualJudgment);}),document['getElementById']('analyzeBtn')[_0x5a252f(0x11c)](_0x5a252f(0x178),handleAnalyze),document[_0x5a252f(0x186)]('exportBtn')['addEventListener'](_0x5a252f(0x178),handleExport),document['getElementById'](_0x5a252f(0x218))[_0x5a252f(0x11c)]('click',handleReset);const _0x4fab72=document[_0x5a252f(0x186)](_0x5a252f(0x17e));_0x4fab72&&_0x4fab72[_0x5a252f(0x11c)](_0x5a252f(0x178),()=>{const _0x288ea0=_0x5a252f;document[_0x288ea0(0x186)]('adminPanel')[_0x288ea0(0x170)][_0x288ea0(0x12e)](_0x288ea0(0x1f7)),initializeAdminPanel();}),document[_0x5a252f(0x186)]('closeAdminBtn')[_0x5a252f(0x11c)](_0x5a252f(0x178),()=>{const _0x41e2e2=_0x5a252f;document[_0x41e2e2(0x186)](_0x41e2e2(0x101))[_0x41e2e2(0x170)][_0x41e2e2(0x21c)](_0x41e2e2(0x1f7));}),document[_0x5a252f(0x13a)](_0x5a252f(0x149))[_0x5a252f(0x158)](_0x319d4a=>{const _0x179fdb=_0x5a252f;_0x319d4a['addEventListener'](_0x179fdb(0x178),_0x1870cd=>{const _0x5a4eb7=_0x179fdb,_0x37e66d=parseInt(_0x1870cd[_0x5a4eb7(0x194)]['dataset'][_0x5a4eb7(0x1af)]),_0xbbdeea=COLOR_DATA[_0x5a4eb7(0x162)](_0x42962c=>_0x42962c[_0x5a4eb7(0x1af)]===_0x37e66d);_0xbbdeea&&showAlert((_0xbbdeea['name']||_0x5a4eb7(0x138)+_0x37e66d)+':\x20'+_0xbbdeea[_0x5a4eb7(0x18c)],_0x5a4eb7(0x1d6));});});}function handleLogin(_0x2fef61){const _0x49ad80=_0x3d13fc;_0x2fef61['preventDefault']();const _0x1fe52a=document['getElementById'](_0x49ad80(0x19d))[_0x49ad80(0x148)],_0x239494=document[_0x49ad80(0x186)](_0x49ad80(0x208))[_0x49ad80(0x148)],_0x545406=document['getElementById'](_0x49ad80(0x1f9)),_0x4b02d1=document['getElementById'](_0x49ad80(0x1b5));_0x545406['style'][_0x49ad80(0x1b6)]=_0x49ad80(0x187),_0x4b02d1[_0x49ad80(0x170)][_0x49ad80(0x12e)](_0x49ad80(0x1f7)),setTimeout(()=>{const _0x26e41d=_0x49ad80,_0x3e8c23=userManager[_0x26e41d(0x246)](_0x1fe52a,_0x239494);if(_0x3e8c23){if(_0x3e8c23['used']>=_0x3e8c23[_0x26e41d(0xff)]){showAlert(_0x26e41d(0x1cb),_0x26e41d(0x1ac),_0x26e41d(0x1e3)),_0x545406['style'][_0x26e41d(0x1b6)]=_0x26e41d(0x184),_0x4b02d1[_0x26e41d(0x170)]['add'](_0x26e41d(0x1f7));return;}currentUser=_0x3e8c23,userManager[_0x26e41d(0x1c6)](_0x1fe52a),document['getElementById'](_0x26e41d(0x119))['textContent']=_0x3e8c23['id'],document[_0x26e41d(0x186)](_0x26e41d(0x248))['textContent']=_0x3e8c23[_0x26e41d(0x241)][_0x26e41d(0x1a3)](),document[_0x26e41d(0x232)][_0x26e41d(0x125)]=_0x26e41d(0x1b7)+_0x3e8c23['role'],(_0x3e8c23[_0x26e41d(0x241)]==='admin'||_0x3e8c23[_0x26e41d(0x241)]===_0x26e41d(0x1d8))&&document[_0x26e41d(0x186)](_0x26e41d(0x153))[_0x26e41d(0x170)]['remove'](_0x26e41d(0x1f7)),document[_0x26e41d(0x186)]('authScreen')[_0x26e41d(0x170)][_0x26e41d(0x21c)](_0x26e41d(0x1f7)),document[_0x26e41d(0x186)]('mainScreen')[_0x26e41d(0x170)][_0x26e41d(0x12e)]('hidden'),showAlert(_0x3e8c23['id']+_0x26e41d(0x127),_0x26e41d(0x239));}else showAlert(_0x26e41d(0x118),_0x26e41d(0x1ac),_0x26e41d(0x1e3)),_0x545406['style'][_0x26e41d(0x1b6)]='block',_0x4b02d1['classList'][_0x26e41d(0x21c)](_0x26e41d(0x1f7));},0x3e8);}function handleLogout(){const _0x488340=_0x3d13fc;currentUser=null,currentImageBase64=null,analysisResult=null,visualJudgment=null,document[_0x488340(0x186)](_0x488340(0x136))['classList'][_0x488340(0x12e)]('hidden'),document[_0x488340(0x186)](_0x488340(0x193))[_0x488340(0x170)][_0x488340(0x21c)]('hidden'),document[_0x488340(0x232)][_0x488340(0x125)]='',document[_0x488340(0x186)]('userId')[_0x488340(0x148)]='',document['getElementById'](_0x488340(0x208))[_0x488340(0x148)]='',document['getElementById'](_0x488340(0x1f9))[_0x488340(0x23b)][_0x488340(0x1b6)]=_0x488340(0x184),document['getElementById'](_0x488340(0x1b5))['classList'][_0x488340(0x21c)](_0x488340(0x1f7)),handleReset();}async function handleImageInput(_0x5ad6bd){const _0x20d821=_0x3d13fc,_0x5ae39b=_0x5ad6bd[_0x20d821(0x129)][_0x20d821(0x19b)][0x0];if(!_0x5ae39b)return;try{showAlert(_0x20d821(0x10d),_0x20d821(0x1d6));const _0x44803c=await compressImage(_0x5ae39b);currentImageBase64=_0x44803c;const _0x35be92=document[_0x20d821(0x186)](_0x20d821(0x1c7));_0x35be92[_0x20d821(0x157)]=_0x20d821(0x1fa)+_0x44803c+_0x20d821(0x151),document['getElementById'](_0x20d821(0x17a))[_0x20d821(0x170)][_0x20d821(0x12e)]('hidden'),document[_0x20d821(0x186)]('analyzeBtn')[_0x20d821(0x175)]=![],document[_0x20d821(0x186)](_0x20d821(0x12d))[_0x20d821(0x170)]['add'](_0x20d821(0x106)),showAlert(_0x20d821(0x1b1),'success');}catch(_0xcbaf49){showAlert('画像の処理中にエラーが発生しました。',_0x20d821(0x1ac)),console[_0x20d821(0x210)](_0xcbaf49);}}function handleVisualJudgment(_0x85fb78){const _0x3c27f2=_0x3d13fc,_0x22a41d=parseInt(_0x85fb78[_0x3c27f2(0x194)][_0x3c27f2(0x21f)][_0x3c27f2(0x1af)]),_0x1c1f6a=document[_0x3c27f2(0x186)](_0x3c27f2(0x226))[_0x3c27f2(0x148)];document[_0x3c27f2(0x13a)]('.visual-color-item')[_0x3c27f2(0x158)](_0x53abcb=>{const _0x25fe89=_0x3c27f2;_0x53abcb['classList'][_0x25fe89(0x12e)](_0x25fe89(0x142));}),_0x85fb78[_0x3c27f2(0x194)][_0x3c27f2(0x170)][_0x3c27f2(0x21c)](_0x3c27f2(0x142));const _0x4f4872=COLOR_DATA[_0x3c27f2(0x162)](_0x198e35=>_0x198e35[_0x3c27f2(0x1af)]===_0x22a41d);visualJudgment={'level':_0x22a41d,'stage':_0x4f4872[_0x3c27f2(0x1d1)]||_0x3c27f2(0x138)+_0x22a41d,'memo':_0x1c1f6a,'timestamp':new Date()[_0x3c27f2(0x24a)]()},showAlert('目視判定:\x20'+visualJudgment[_0x3c27f2(0x19a)],'info');}async function handleAnalyze(){const _0x4fe603=_0x3d13fc;if(!currentImageBase64){showAlert(_0x4fe603(0x16f),'warning');return;}const _0x38a39a=document[_0x4fe603(0x186)](_0x4fe603(0x12d)),_0x518145=document['getElementById'](_0x4fe603(0x234));_0x38a39a[_0x4fe603(0x175)]=!![],_0x38a39a[_0x4fe603(0x170)][_0x4fe603(0x21c)](_0x4fe603(0x14d)),_0x38a39a[_0x4fe603(0x170)]['remove'](_0x4fe603(0x106)),_0x518145[_0x4fe603(0x170)]['remove'](_0x4fe603(0x1f7));try{showAlert('画像を解析中...','info'),analysisResult=await analyzeImageOffline(currentImageBase64),displayResults(analysisResult),document[_0x4fe603(0x186)]('exportBtn')['disabled']=![],showAlert(_0x4fe603(0x1f3),_0x4fe603(0x239));}catch(_0x380bb9){showAlert('解析中にエラーが発生しました:\x20'+_0x380bb9[_0x4fe603(0x240)],'danger'),console['error'](_0x380bb9);}finally{_0x38a39a['disabled']=![],_0x38a39a[_0x4fe603(0x170)][_0x4fe603(0x12e)](_0x4fe603(0x14d)),_0x518145['classList'][_0x4fe603(0x21c)](_0x4fe603(0x1f7));}}function displayResults(_0xf84f7b){const _0x5a8cdd=_0x3d13fc,_0x37241e=document[_0x5a8cdd(0x186)]('resultCard'),_0x28c056=document[_0x5a8cdd(0x186)]('stageValue'),_0x558ad5=document[_0x5a8cdd(0x186)]('ripenessVisual'),_0x1ce5ba=document[_0x5a8cdd(0x186)](_0x5a8cdd(0x10f)),_0x2d333d=document[_0x5a8cdd(0x186)](_0x5a8cdd(0x223)),_0x5b918c=document[_0x5a8cdd(0x186)](_0x5a8cdd(0x1ae));_0x28c056[_0x5a8cdd(0x1d7)]=_0xf84f7b[_0x5a8cdd(0x19a)],_0x28c056[_0x5a8cdd(0x23b)][_0x5a8cdd(0x166)]=_0xf84f7b[_0x5a8cdd(0x166)],_0x1ce5ba[_0x5a8cdd(0x1d7)]=_0xf84f7b[_0x5a8cdd(0x18c)],_0x2d333d['textContent']=_0xf84f7b[_0x5a8cdd(0x14a)],_0x558ad5['innerHTML']=_0x5a8cdd(0x1dd)+_0xf84f7b[_0x5a8cdd(0x108)]+_0x5a8cdd(0x15d)+_0xf84f7b[_0x5a8cdd(0x166)]+';\x20border-color:\x20'+_0xf84f7b[_0x5a8cdd(0x166)]+_0x5a8cdd(0x249),_0x5b918c['innerHTML']=_0x5a8cdd(0x13e)+_0xf84f7b[_0x5a8cdd(0x108)]+_0x5a8cdd(0x1ea)+_0xf84f7b[_0x5a8cdd(0x1f2)]+'%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>緑色</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>'+_0xf84f7b[_0x5a8cdd(0x163)][_0x5a8cdd(0x135)]+_0x5a8cdd(0x1ce)+_0xf84f7b['percentages'][_0x5a8cdd(0x126)]+_0x5a8cdd(0x1da)+_0xf84f7b[_0x5a8cdd(0x163)][_0x5a8cdd(0x11d)]+_0x5a8cdd(0x231)+_0xf84f7b[_0x5a8cdd(0x163)]['spot']+_0x5a8cdd(0x13f)+_0xf84f7b[_0x5a8cdd(0x163)]['brown']+'%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>その他</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>'+_0xf84f7b['percentages'][_0x5a8cdd(0x12c)]+_0x5a8cdd(0x1f5)+_0xf84f7b[_0x5a8cdd(0x16a)][_0x5a8cdd(0x220)]()+_0x5a8cdd(0x146)+Math[_0x5a8cdd(0x20e)](_0xf84f7b[_0x5a8cdd(0xfd)])+'ms</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',document['querySelectorAll'](_0x5a8cdd(0x103))['forEach'](_0x3b71c3=>{const _0x46199f=_0x5a8cdd;_0x3b71c3[_0x46199f(0x170)][_0x46199f(0x12e)](_0x46199f(0x1d4)),parseInt(_0x3b71c3['dataset'][_0x46199f(0x1af)])===_0xf84f7b[_0x46199f(0x108)]&&_0x3b71c3[_0x46199f(0x170)][_0x46199f(0x21c)]('app-selected');}),_0x37241e[_0x5a8cdd(0x170)]['remove'](_0x5a8cdd(0x1f7)),_0x37241e[_0x5a8cdd(0x1e9)]({'behavior':'smooth'});}function handleExport(){const _0xdef24d=_0x3d13fc;if(!analysisResult){showAlert(_0xdef24d(0x1b3),_0xdef24d(0x1f6));return;}try{const _0x4c4b5b={'claimType':document[_0xdef24d(0x186)](_0xdef24d(0x202))[_0xdef24d(0x148)],'deliveryDate':document[_0xdef24d(0x186)]('deliveryDate')[_0xdef24d(0x148)],'captureDate':document[_0xdef24d(0x186)]('captureDate')[_0xdef24d(0x148)],'productName':document[_0xdef24d(0x186)](_0xdef24d(0x14f))[_0xdef24d(0x148)],'chainName':document['getElementById'](_0xdef24d(0x172))[_0xdef24d(0x148)],'storeName':document[_0xdef24d(0x186)](_0xdef24d(0x21d))[_0xdef24d(0x148)],'quantity':document[_0xdef24d(0x186)](_0xdef24d(0x1ad))[_0xdef24d(0x148)],'unit':document[_0xdef24d(0x186)](_0xdef24d(0x10b))[_0xdef24d(0x148)],'code1':document[_0xdef24d(0x186)]('code1')['value'],'code2':document[_0xdef24d(0x186)](_0xdef24d(0x22e))[_0xdef24d(0x148)],'code3':document[_0xdef24d(0x186)]('code3')[_0xdef24d(0x148)],'claimAmount':document[_0xdef24d(0x186)]('claimAmount')['value']},_0x2919dd=[_0xdef24d(0x225),_0xdef24d(0x1e1),_0xdef24d(0x1c4),_0xdef24d(0x205),_0xdef24d(0x15b),'店舗名','数量','単位','汎用コード1',_0xdef24d(0x13d),'汎用コード3',_0xdef24d(0x159),_0xdef24d(0x1b8),_0xdef24d(0x161),_0xdef24d(0x11f),_0xdef24d(0x191),'黄緑色%',_0xdef24d(0x195),_0xdef24d(0x1a6),'褐色%',_0xdef24d(0x190),_0xdef24d(0x100),_0xdef24d(0x137),_0xdef24d(0x197),_0xdef24d(0x164),'解析者',_0xdef24d(0x117)],_0x309cbf=[_0x4c4b5b[_0xdef24d(0x202)],_0x4c4b5b[_0xdef24d(0x1fe)],_0x4c4b5b[_0xdef24d(0x110)],_0x4c4b5b[_0xdef24d(0x14f)],_0x4c4b5b[_0xdef24d(0x172)],_0x4c4b5b[_0xdef24d(0x21d)],_0x4c4b5b['quantity'],_0x4c4b5b[_0xdef24d(0x10b)],_0x4c4b5b[_0xdef24d(0x22f)],_0x4c4b5b[_0xdef24d(0x22e)],_0x4c4b5b[_0xdef24d(0x1c2)],_0x4c4b5b['claimAmount'],analysisResult['colorCode'],analysisResult[_0xdef24d(0x19a)],analysisResult[_0xdef24d(0x1f2)],analysisResult[_0xdef24d(0x163)][_0xdef24d(0x135)],analysisResult[_0xdef24d(0x163)][_0xdef24d(0x126)],analysisResult[_0xdef24d(0x163)]['yellow'],analysisResult['percentages']['spot'],analysisResult[_0xdef24d(0x163)][_0xdef24d(0x1db)],analysisResult[_0xdef24d(0x163)][_0xdef24d(0x12c)],analysisResult['totalPixels'],Math[_0xdef24d(0x20e)](analysisResult['processingTime']),visualJudgment?visualJudgment['stage']:'',visualJudgment?visualJudgment[_0xdef24d(0x219)]:'',currentUser?currentUser['id']:_0xdef24d(0x20b),new Date()[_0xdef24d(0x24a)]()],_0xbcad5b=[_0x2919dd['join'](','),_0x309cbf[_0xdef24d(0x113)](_0x42fe26=>'\x22'+_0x42fe26+'\x22')[_0xdef24d(0x15c)](',')][_0xdef24d(0x15c)]('\x0a'),_0x27412d=new Blob(['\ufeff'+_0xbcad5b],{'type':_0xdef24d(0x1df)}),_0x146473=document[_0xdef24d(0x1b9)]('a'),_0x1c4531=new Date()[_0xdef24d(0x24a)]()[_0xdef24d(0x1c8)](/[:.]/g,'-')[_0xdef24d(0x216)](0x0,0x13);_0x146473[_0xdef24d(0x1eb)]='banana-report-'+_0x1c4531+'.csv',_0x146473[_0xdef24d(0x1ef)]=URL[_0xdef24d(0x17b)](_0x27412d),_0x146473[_0xdef24d(0x178)](),showAlert(_0xdef24d(0x1a2),_0xdef24d(0x239));}catch(_0x4759b5){showAlert('CSV出力中にエラーが発生しました。',_0xdef24d(0x1ac)),console['error'](_0x4759b5);}}function handleReset(){const _0x47bcbf=_0x3d13fc;currentImageBase64=null,analysisResult=null,visualJudgment=null,document[_0x47bcbf(0x186)](_0x47bcbf(0x1c7))[_0x47bcbf(0x157)]=_0x47bcbf(0x22a),document[_0x47bcbf(0x186)]('cameraInput')['value']='',document[_0x47bcbf(0x186)]('fileInput')[_0x47bcbf(0x148)]='',document[_0x47bcbf(0x13a)](_0x47bcbf(0x165))[_0x47bcbf(0x158)](_0x58b10c=>{const _0x5cef22=_0x47bcbf;_0x58b10c[_0x5cef22(0x170)][_0x5cef22(0x12e)]('selected');}),document['getElementById'](_0x47bcbf(0x226))[_0x47bcbf(0x148)]='',document[_0x47bcbf(0x186)](_0x47bcbf(0x17a))[_0x47bcbf(0x170)][_0x47bcbf(0x21c)]('hidden'),document[_0x47bcbf(0x186)](_0x47bcbf(0x12d))['disabled']=!![],document['getElementById'](_0x47bcbf(0x12d))[_0x47bcbf(0x170)]['remove']('btn-pulse',_0x47bcbf(0x14d)),document['getElementById'](_0x47bcbf(0x19e))[_0x47bcbf(0x175)]=!![],document[_0x47bcbf(0x186)]('resultCard')[_0x47bcbf(0x170)][_0x47bcbf(0x21c)]('hidden'),document[_0x47bcbf(0x13a)](_0x47bcbf(0x103))['forEach'](_0xe65f17=>{const _0x46d715=_0x47bcbf;_0xe65f17[_0x46d715(0x170)][_0x46d715(0x12e)](_0x46d715(0x1d4));});const _0xb72c71=getCurrentDateISO();document[_0x47bcbf(0x186)](_0x47bcbf(0x202))[_0x47bcbf(0x148)]='',document[_0x47bcbf(0x186)](_0x47bcbf(0x1fe))[_0x47bcbf(0x148)]=_0xb72c71,document[_0x47bcbf(0x186)](_0x47bcbf(0x110))[_0x47bcbf(0x148)]=_0xb72c71,document[_0x47bcbf(0x186)](_0x47bcbf(0x14f))[_0x47bcbf(0x148)]='',document['getElementById']('chainName')[_0x47bcbf(0x148)]='',document[_0x47bcbf(0x186)](_0x47bcbf(0x21d))[_0x47bcbf(0x148)]='',document[_0x47bcbf(0x186)]('quantity')[_0x47bcbf(0x148)]='',document['getElementById'](_0x47bcbf(0x10b))[_0x47bcbf(0x148)]=UNIT_OPTIONS[0x0],document[_0x47bcbf(0x186)]('code1')[_0x47bcbf(0x148)]='',document[_0x47bcbf(0x186)](_0x47bcbf(0x22e))[_0x47bcbf(0x148)]='',document[_0x47bcbf(0x186)](_0x47bcbf(0x1c2))[_0x47bcbf(0x148)]='',document['getElementById'](_0x47bcbf(0x230))[_0x47bcbf(0x148)]='',showAlert(_0x47bcbf(0x183),_0x47bcbf(0x1d6));}function initializeAdminPanel(){const _0x227aa3=_0x3d13fc;!tagInputComponents[_0x227aa3(0x227)]&&(tagInputComponents[_0x227aa3(0x227)]=new TagInput(_0x227aa3(0x229),getRequiredFields())),!tagInputComponents[_0x227aa3(0x128)]&&(tagInputComponents[_0x227aa3(0x128)]=new TagInput(_0x227aa3(0x1d9),getClaimTypes())),updateUserTable(),initializeColorParams(),setupAdminEventListeners();}function _0x3438(){const _0x1b8503=['totalPixels','Saturation','preventDefault','userTableBody','#FFEB3B','画像を選択してください。','classList','.param-range','chainName','saveColorParamsBtn','admin','disabled','DOMContentLoaded','push','click','カラーパラメータを保存しました。','visualJudgmentCard','createObjectURL','height','yellowHueMin','adminSettingsBtn','ユーザー\x20\x22','debugApp','readAsText','袋（パック）','フォームをリセットしました。','block','早期消費推奨','getElementById','none','mainAlert','<option\x20value=\x22','hueMin','newUserId','description','filter','getUsers','379105abxqAB','その他%','緑色%','現在のパスワードが正しくありません。','mainScreen','currentTarget','黄色%','src','目視判定','全体が緑色の状態','病害虫','stage','files','tag','userId','exportBtn','newPassword','形状不良','同じIDのユーザーが既に存在します','CSVファイルをダウンロードしました。','toUpperCase','drawImage','newUserPassword','スポット%','Bn@7QcX9','toDataURL','キログラム','オールグリーン','user2024','danger','quantity','resultContent','level','getItem','画像が読み込まれました。解析を実行してください。','key','解析結果がありません。','ユーザーを削除しました。','loginLoading','display','user-','カラーコード','createElement','パスワード変更中にエラーが発生しました。','褐変が進んだ状態','\x22\x20を削除しますか？','setItem','品質劣化・廃棄検討','trim','changePasswordBtn','.param-value','code3','appendChild','撮影日','newUserRole','updateUsage','imagePreview','replace','スター','backgroundRemoval','使用回数の上限に達しています。管理者にお問い合わせください。','tagList','render','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>黄緑色</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>','#4CAF50','ユーザーIDとパスワードを入力してください。','name','users','9FdDzxG','app-selected','ケース','info','textContent','expert','claimTypesContainer','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>黄色</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>','brown','新しいパスワードが一致しません。','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22color-circle\x20color-','greenHueMin','text/csv;charset=utf-8;','canvas','納品日','removeTag','authAlert','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-warning\x20btn-sm\x22\x20onclick=\x22editUser(\x27','5uZUetJ','\x27)\x22>削除</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20','追熟が必要です','全体が黄色い状態','scrollIntoView','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>信頼度</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>','download','<option\x20value=\x22\x22>選択してください</option>','#795548','857248IkBMfd','href','pass','spot','confidence','解析が完了しました。','greenHueMax','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>解析ピクセル数</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>','warning','hidden','その他','loginBtn','<img\x20src=\x22','パラメータ保存中にエラーが発生しました。','\x27)\x22>編集</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x22\x20onclick=\x22deleteUser(\x27','1047044KwErwk','deliveryDate','房（束）','3nJYfHA','saturationMax','claimType','夏期出荷に適します','すべてのパスワードフィールドを入力してください。','商品名','追熟有望期の最適色','max','password','addTag','55hliiNx','unknown','image/jpeg','assign','round','yellowHueMax','error','パレット','spotValueMin','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','コンテナ','ユーザーが見つかりません','slice','件のデータをインポートしました。','resetBtn','memo','vMax','change','add','storeName','#8BC34A','dataset','toLocaleString','tags','alert\x20alert-','stageRecommendation','hostname','クレーム種別','visualJudgmentMemo','requiredFields','2375432gxAkqn','requiredFieldsContainer','<div\x20class=\x22image-placeholder\x22>画像が選択されていません</div>','***','submit','white','code2','code1','claimAmount','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>スポット</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>','body','Value','mainLoading','input','span','addUserBtn','split','success','cameraInput','style','hueMax','addUser','127.0.0.1','editUser','message','role','parentElement','#CDDC39','used','vMin','authenticate','resetColorParamsBtn','userRole',';\x22></div>\x0a\x20\x20\x20\x20','toISOString','logoutBtn','querySelector','processingTime','saturation','limit','解析ピクセル数','adminPanel','width','.color-item','CSVファイルを選択してください。','getContext','btn-pulse','keydown','colorCode','フルイエロー','ハーフグリーン','unit','箱（ボックス）','画像を処理中...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','stageDescription','captureDate','パラメータを初期値に戻しました。','\x22>×</span>','map','min','black','loginForm','解析日時','ユーザーIDまたはパスワードが正しくありません。','userName','.remove','includes','addEventListener','yellow','色むら','信頼度','user1','681780tYxIbR','parse','fileInput','978430YDrHPi','className','yellowGreen','さん、ようこそ！','claimTypes','target','newUserLimit','スポットが広がった状態','other','analyzeBtn','remove','本（個別）','Enter','container','緑色の部分と黄色の部分が混在','ユーザーを追加しました。','大部分が黄色くなった状態','green','authScreen','処理時間ms','カラー','パスワードを変更しました。','querySelectorAll','importCsvBtn','saveUsers','汎用コード2','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>カラーコード</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>褐色</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>','confirmPassword','user','selected','deleteUser','greenSaturation','甘味が増した食べ頃','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>処理時間</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>','#FFC107','value','.color-item.clickable','recommendation','onload','banana_settings','analyzing','getImageData','productName','loadUsers','\x22\x20alt=\x22選択された画像\x22>','length','adminBtnGroup','currentPassword','getTags','banana_users','innerHTML','forEach','希望クレーム請求金額','.tag-input','チェーン名','join','\x22\x20style=\x22background:\x20','data','ライトグリーン','result','熟度段階','find','percentages','目視メモ','.visual-color-item','color','食べ頃・販売適期','stringify','502398QkyaaL'];_0x3438=function(){return _0x1b8503;};return _0x3438();}function setupAdminEventListeners(){const _0x222912=_0x3d13fc;document[_0x222912(0x186)](_0x222912(0x237))['addEventListener'](_0x222912(0x178),handleAddUser),document[_0x222912(0x186)](_0x222912(0x173))['addEventListener'](_0x222912(0x178),saveColorParams),document[_0x222912(0x186)](_0x222912(0x247))[_0x222912(0x11c)](_0x222912(0x178),resetColorParams),document['getElementById'](_0x222912(0x13b))['addEventListener']('click',handleCsvImport),document[_0x222912(0x186)](_0x222912(0x1c0))[_0x222912(0x11c)](_0x222912(0x178),handlePasswordChange);}function handleAddUser(){const _0x5b5abd=_0x3d13fc,_0x14b719=document[_0x5b5abd(0x186)]('newUserId')[_0x5b5abd(0x148)][_0x5b5abd(0x1bf)](),_0x4af922=document[_0x5b5abd(0x186)](_0x5b5abd(0x1a5))['value'],_0x56f339=document[_0x5b5abd(0x186)](_0x5b5abd(0x1c5))[_0x5b5abd(0x148)],_0x4ffb48=document[_0x5b5abd(0x186)](_0x5b5abd(0x12a))[_0x5b5abd(0x148)];if(!_0x14b719||!_0x4af922){showAlert(_0x5b5abd(0x1d0),_0x5b5abd(0x1f6));return;}try{userManager[_0x5b5abd(0x23d)](_0x14b719,_0x4af922,_0x56f339,_0x4ffb48),document['getElementById'](_0x5b5abd(0x18b))[_0x5b5abd(0x148)]='',document[_0x5b5abd(0x186)]('newUserPassword')['value']='',document[_0x5b5abd(0x186)](_0x5b5abd(0x1c5))['value']=_0x5b5abd(0x141),document[_0x5b5abd(0x186)](_0x5b5abd(0x12a))['value']='100',updateUserTable(),showAlert(_0x5b5abd(0x133),_0x5b5abd(0x239));}catch(_0x4fa530){showAlert(_0x4fa530[_0x5b5abd(0x240)],_0x5b5abd(0x1ac));}}function _0x55b1(_0x1127e5,_0x4938d8){const _0x3438cc=_0x3438();return _0x55b1=function(_0x55b1c0,_0x4edf3e){_0x55b1c0=_0x55b1c0-0xfb;let _0x5c709d=_0x3438cc[_0x55b1c0];return _0x5c709d;},_0x55b1(_0x1127e5,_0x4938d8);}function updateUserTable(){const _0x280593=_0x3d13fc,_0x66522b=document['getElementById'](_0x280593(0x16d)),_0x2c38c6=userManager['getUsers']();_0x66522b[_0x280593(0x157)]=_0x2c38c6['map'](_0x4c4587=>_0x280593(0x10e)+_0x4c4587['id']+_0x280593(0x213)+_0x4c4587[_0x280593(0x241)]+_0x280593(0x213)+(_0x4c4587[_0x280593(0x244)]||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4c4587[_0x280593(0xff)]+_0x280593(0x1e4)+_0x4c4587['id']+_0x280593(0x1fc)+_0x4c4587['id']+_0x280593(0x1e6))[_0x280593(0x15c)]('');}window[_0x3d13fc(0x23f)]=function(_0x51792d){const _0x2eac0d=_0x3d13fc,_0x1d289d=userManager[_0x2eac0d(0x1d2)][_0x2eac0d(0x162)](_0x129467=>_0x129467['id']===_0x51792d);if(!_0x1d289d)return;const _0x10fcea=prompt('新しい使用回数上限を入力してください:',_0x1d289d[_0x2eac0d(0xff)]);if(_0x10fcea&&!isNaN(_0x10fcea))try{userManager['editUser'](_0x51792d,{'limit':parseInt(_0x10fcea)}),updateUserTable(),showAlert('ユーザー情報を更新しました。','success');}catch(_0x25f34c){showAlert(_0x25f34c[_0x2eac0d(0x240)],_0x2eac0d(0x1ac));}},window['deleteUser']=function(_0x2c24ed){const _0x2bbb7c=_0x3d13fc;if(confirm(_0x2bbb7c(0x17f)+_0x2c24ed+_0x2bbb7c(0x1bc)))try{userManager[_0x2bbb7c(0x143)](_0x2c24ed),updateUserTable(),showAlert(_0x2bbb7c(0x1b4),_0x2bbb7c(0x239));}catch(_0x1c00d6){showAlert(_0x1c00d6[_0x2bbb7c(0x240)],'danger');}};function loadSettings(){const _0x55ef47=_0x3d13fc;try{const _0x13bde1=localStorage['getItem'](_0x55ef47(0x14c));if(_0x13bde1){const _0x416702=JSON['parse'](_0x13bde1);_0x416702['claimTypes']?updateClaimTypeOptions(_0x416702[_0x55ef47(0x128)]):updateClaimTypeOptions(DEFAULT_CLAIM_TYPES);}else updateClaimTypeOptions(DEFAULT_CLAIM_TYPES);}catch(_0x37388d){console[_0x55ef47(0x210)]('設定読み込みエラー:',_0x37388d),updateClaimTypeOptions(DEFAULT_CLAIM_TYPES);}}function saveSettings(){const _0x33ae14=_0x3d13fc,_0x3cfd3a={'claimTypes':getClaimTypes(),'requiredFields':getRequiredFields(),'colorParams':getCurrentColorParams(),'timestamp':new Date()['toISOString']()};localStorage[_0x33ae14(0x1bd)](_0x33ae14(0x14c),JSON['stringify'](_0x3cfd3a));}function getClaimTypes(){const _0x46c976=_0x3d13fc,_0xd522b2=localStorage[_0x46c976(0x1b0)](_0x46c976(0x14c));if(_0xd522b2){const _0x28704c=JSON[_0x46c976(0x122)](_0xd522b2);return _0x28704c[_0x46c976(0x128)]||DEFAULT_CLAIM_TYPES;}return DEFAULT_CLAIM_TYPES;}function getRequiredFields(){const _0x19d0df=_0x3d13fc,_0xc96399=localStorage[_0x19d0df(0x1b0)]('banana_settings');if(_0xc96399){const _0x4fdec0=JSON[_0x19d0df(0x122)](_0xc96399);return _0x4fdec0['requiredFields']||[_0x19d0df(0x225),_0x19d0df(0x1e1),_0x19d0df(0x205)];}return[_0x19d0df(0x225),_0x19d0df(0x1e1),_0x19d0df(0x205)];}function updateClaimTypeOptions(_0x520aab){const _0x5d633b=_0x3d13fc,_0x2ec8d2=document['getElementById']('claimType');_0x2ec8d2&&(_0x2ec8d2[_0x5d633b(0x157)]=_0x5d633b(0x1ec)+_0x520aab['map'](_0x58ef4a=>'<option\x20value=\x22'+_0x58ef4a+'\x22>'+_0x58ef4a+'</option>')[_0x5d633b(0x15c)](''));}function initializeColorParams(){const _0x245c46=_0x3d13fc,_0x4c57b1=getCurrentColorParams();document['getElementById'](_0x245c46(0x1de))[_0x245c46(0x148)]=_0x4c57b1[_0x245c46(0x135)][_0x245c46(0x18a)],document[_0x245c46(0x186)]('greenHueMax')[_0x245c46(0x148)]=_0x4c57b1[_0x245c46(0x135)][_0x245c46(0x23c)],document['getElementById']('greenSaturation')[_0x245c46(0x148)]=_0x4c57b1[_0x245c46(0x135)][_0x245c46(0xfe)]*0x64,document['getElementById'](_0x245c46(0x17d))[_0x245c46(0x148)]=_0x4c57b1[_0x245c46(0x11d)][_0x245c46(0x18a)],document['getElementById']('yellowHueMax')[_0x245c46(0x148)]=_0x4c57b1[_0x245c46(0x11d)][_0x245c46(0x23c)],document[_0x245c46(0x186)](_0x245c46(0x212))[_0x245c46(0x148)]=_0x4c57b1[_0x245c46(0x1f1)]['vMin']*0x64,updateParamValues(),document[_0x245c46(0x13a)](_0x245c46(0x171))[_0x245c46(0x158)](_0x5eb143=>{const _0x41c29c=_0x245c46;_0x5eb143[_0x41c29c(0x11c)](_0x41c29c(0x235),updateParamValues);});}function updateParamValues(){const _0x13caf0=_0x3d13fc;document[_0x13caf0(0x13a)](_0x13caf0(0x171))[_0x13caf0(0x158)](_0x5a0f1e=>{const _0x708e22=_0x13caf0,_0x377bcd=_0x5a0f1e[_0x708e22(0x242)]['querySelector'](_0x708e22(0x1c1));let _0x107a5f=_0x5a0f1e[_0x708e22(0x148)];(_0x5a0f1e['id'][_0x708e22(0x11b)](_0x708e22(0x16b))||_0x5a0f1e['id'][_0x708e22(0x11b)](_0x708e22(0x233)))&&(_0x107a5f+='%'),_0x377bcd[_0x708e22(0x1d7)]=_0x107a5f;});}function getCurrentColorParams(){return COLOR_PARAMS;}function saveColorParams(){const _0x561f3d=_0x3d13fc;try{const _0x4fe432={'green':{'hueMin':parseInt(document['getElementById']('greenHueMin')['value']),'hueMax':parseInt(document[_0x561f3d(0x186)]('greenHueMax')['value']),'saturation':parseInt(document[_0x561f3d(0x186)]('greenSaturation')[_0x561f3d(0x148)])/0x64,'value':COLOR_PARAMS[_0x561f3d(0x135)][_0x561f3d(0x148)]},'yellowGreen':COLOR_PARAMS[_0x561f3d(0x126)],'yellow':{'hueMin':parseInt(document[_0x561f3d(0x186)](_0x561f3d(0x17d))['value']),'hueMax':parseInt(document[_0x561f3d(0x186)](_0x561f3d(0x20f))[_0x561f3d(0x148)]),'saturation':COLOR_PARAMS[_0x561f3d(0x11d)][_0x561f3d(0xfe)],'value':COLOR_PARAMS['yellow'][_0x561f3d(0x148)]},'spot':{...COLOR_PARAMS[_0x561f3d(0x1f1)],'vMin':parseInt(document[_0x561f3d(0x186)](_0x561f3d(0x212))[_0x561f3d(0x148)])/0x64},'brown':COLOR_PARAMS[_0x561f3d(0x1db)],'backgroundRemoval':COLOR_PARAMS[_0x561f3d(0x1ca)]};Object[_0x561f3d(0x20d)](COLOR_PARAMS,_0x4fe432),saveSettings(),showAlert(_0x561f3d(0x179),_0x561f3d(0x239));}catch(_0x40e964){showAlert(_0x561f3d(0x1fb),_0x561f3d(0x1ac)),console[_0x561f3d(0x210)](_0x40e964);}}function resetColorParams(){const _0x24463b=_0x3d13fc;document['getElementById'](_0x24463b(0x1de))[_0x24463b(0x148)]=0x50,document[_0x24463b(0x186)](_0x24463b(0x1f4))['value']=0x8c,document[_0x24463b(0x186)](_0x24463b(0x144))[_0x24463b(0x148)]=0x1e,document[_0x24463b(0x186)]('yellowHueMin')['value']=0x2d,document[_0x24463b(0x186)](_0x24463b(0x20f))['value']=0x41,document[_0x24463b(0x186)]('spotValueMin')[_0x24463b(0x148)]=0x1e,updateParamValues(),showAlert(_0x24463b(0x111),_0x24463b(0x1d6));}function handleCsvImport(){const _0x45915b=_0x3d13fc,_0x499c2e=document['getElementById']('csvImportInput'),_0x5798a1=_0x499c2e[_0x45915b(0x19b)][0x0];if(!_0x5798a1){showAlert(_0x45915b(0x104),_0x45915b(0x1f6));return;}const _0x5e3402=new FileReader();_0x5e3402['onload']=function(_0x4c3ef7){const _0x1eb426=_0x45915b;try{const _0x36e4f1=_0x4c3ef7['target'][_0x1eb426(0x160)],_0x5b1c19=_0x36e4f1[_0x1eb426(0x238)]('\x0a'),_0x5ce562=_0x5b1c19[_0x1eb426(0x216)](0x1)[_0x1eb426(0x18d)](_0x2e4635=>_0x2e4635['trim']())[_0x1eb426(0x113)](_0x2f2e1c=>{const _0x2c1467=_0x1eb426,_0x1d62e5=_0x2f2e1c[_0x2c1467(0x238)](',')[_0x2c1467(0x113)](_0x2b0d07=>_0x2b0d07[_0x2c1467(0x1c8)](/"/g,'')[_0x2c1467(0x1bf)]());return _0x1d62e5;});showAlert(_0x5ce562[_0x1eb426(0x152)]+_0x1eb426(0x217),_0x1eb426(0x239));}catch(_0x5bf249){showAlert('CSVファイルの読み込み中にエラーが発生しました。',_0x1eb426(0x1ac)),console[_0x1eb426(0x210)](_0x5bf249);}},_0x5e3402[_0x45915b(0x181)](_0x5798a1);}function handlePasswordChange(){const _0x292415=_0x3d13fc,_0x572309=document['getElementById'](_0x292415(0x154))['value'],_0x16004a=document[_0x292415(0x186)]('newPassword')[_0x292415(0x148)],_0x10577a=document['getElementById'](_0x292415(0x140))[_0x292415(0x148)];if(!_0x572309||!_0x16004a||!_0x10577a){showAlert(_0x292415(0x204),'warning');return;}if(_0x16004a!==_0x10577a){showAlert(_0x292415(0x1dc),'warning');return;}if(atob(currentUser[_0x292415(0x1f0)])!==_0x572309){showAlert(_0x292415(0x192),_0x292415(0x1ac));return;}try{userManager['editUser'](currentUser['id'],{'pass':btoa(_0x16004a)}),document[_0x292415(0x186)](_0x292415(0x154))[_0x292415(0x148)]='',document[_0x292415(0x186)](_0x292415(0x19f))[_0x292415(0x148)]='',document[_0x292415(0x186)](_0x292415(0x140))[_0x292415(0x148)]='',showAlert(_0x292415(0x139),_0x292415(0x239));}catch(_0x30ee70){showAlert(_0x292415(0x1ba),'danger'),console[_0x292415(0x210)](_0x30ee70);}}document[_0x3d13fc(0x11c)](_0x3d13fc(0x176),initializeApp);(window['location'][_0x3d13fc(0x224)]==='localhost'||window['location'][_0x3d13fc(0x224)]===_0x3d13fc(0x23e))&&(window[_0x3d13fc(0x180)]={'currentUser':()=>currentUser,'analysisResult':()=>analysisResult,'colorData':()=>COLOR_DATA,'userManager':()=>userManager});
