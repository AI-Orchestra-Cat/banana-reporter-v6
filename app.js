const _0x3dc482=_0xf8a1;(function(_0x10eb70,_0x504c3a){const _0x54a0aa=_0xf8a1,_0x5bd9d7=_0x10eb70();while(!![]){try{const _0x59c79e=-parseInt(_0x54a0aa(0xc5))/0x1*(-parseInt(_0x54a0aa(0x18a))/0x2)+parseInt(_0x54a0aa(0x139))/0x3+-parseInt(_0x54a0aa(0x13a))/0x4*(-parseInt(_0x54a0aa(0x96))/0x5)+-parseInt(_0x54a0aa(0x13f))/0x6+parseInt(_0x54a0aa(0xee))/0x7+-parseInt(_0x54a0aa(0xe3))/0x8*(parseInt(_0x54a0aa(0x18b))/0x9)+parseInt(_0x54a0aa(0x161))/0xa;if(_0x59c79e===_0x504c3a)break;else _0x5bd9d7['push'](_0x5bd9d7['shift']());}catch(_0x358e2f){_0x5bd9d7['push'](_0x5bd9d7['shift']());}}}(_0x329f,0x4cee2));let currentUser=null,currentImageBase64=null,analysisResult=null,visualJudgment=null,userManager=null,tagInputComponents={};async function hashPassword(_0x260348){const _0x4aea85=_0xf8a1,_0x128e71=new TextEncoder()[_0x4aea85(0x80)](_0x260348),_0x1b0642=await crypto['subtle']['digest'](_0x4aea85(0x86),_0x128e71),_0x359624=Array[_0x4aea85(0x170)](new Uint8Array(_0x1b0642));return _0x359624['map'](_0x2b7507=>_0x2b7507[_0x4aea85(0xa7)](0x10)[_0x4aea85(0x106)](0x2,'0'))[_0x4aea85(0x190)]('');}const AUTH_CONFIG={'users':[{'id':'admin','passHash':_0x3dc482(0x93),'role':'admin','limit':0x3e8,'used':0x0},{'id':_0x3dc482(0xc2),'passHash':_0x3dc482(0xc6),'role':_0x3dc482(0x81),'limit':0x1f4,'used':0x0},{'id':_0x3dc482(0x83),'passHash':_0x3dc482(0x194),'role':'user','limit':0x64,'used':0x0}]},COLOR_DATA=[{'level':0x2,'name':_0x3dc482(0x87),'color':_0x3dc482(0x14f),'textColor':_0x3dc482(0x124),'description':_0x3dc482(0x15b),'recommendation':_0x3dc482(0xd5)},{'level':0x3,'name':_0x3dc482(0xa1),'color':_0x3dc482(0x12e),'textColor':'white','description':'白みがかった黄色を帯びた状態','recommendation':_0x3dc482(0x169)},{'level':0x4,'name':_0x3dc482(0xf0),'color':_0x3dc482(0x11b),'textColor':_0x3dc482(0x124),'description':_0x3dc482(0x14d),'recommendation':_0x3dc482(0xb3)},{'level':0x5,'name':'グリーンチップ','color':'#CDDC39','textColor':_0x3dc482(0xce),'description':_0x3dc482(0x15c),'recommendation':'夏期出荷に適します'},{'level':0x6,'name':'フルイエロー','color':'#FFEB3B','textColor':'black','description':'全体が黄色い状態','recommendation':_0x3dc482(0x102)},{'level':0x7,'name':_0x3dc482(0xe5),'color':_0x3dc482(0x197),'textColor':_0x3dc482(0xce),'description':_0x3dc482(0x108),'recommendation':_0x3dc482(0x181)},{'level':0x8,'name':'','color':'#FF9800','textColor':_0x3dc482(0x124),'description':_0x3dc482(0xed),'recommendation':_0x3dc482(0x11c)},{'level':0x9,'name':'','color':_0x3dc482(0x84),'textColor':_0x3dc482(0x124),'description':'褐変が進んだ状態','recommendation':'品質劣化・廃棄検討'}];function getColorInfo(_0x376534){const _0x8f3cce=_0x3dc482;return COLOR_DATA[_0x8f3cce(0x182)](_0x385f75=>_0x385f75[_0x8f3cce(0xbd)]===_0x376534)||COLOR_DATA[0x0];}function initializeClaimTypes(){const _0x27c1ea=_0x3dc482,_0xf68c27=['過熟','未熟',_0x27c1ea(0x12c),_0x27c1ea(0x109),'カビ','青ぶく','黄ぶく',_0x27c1ea(0xa6)],_0x59d340=document[_0x27c1ea(0x88)](_0x27c1ea(0xf2));_0x59d340[_0x27c1ea(0xa2)]='<option\x20value=\x22\x22>選択してください</option>',_0xf68c27[_0x27c1ea(0x183)](_0x583afe=>{const _0x3fd6fb=_0x27c1ea,_0x2a449f=document[_0x3fd6fb(0x110)]('option');_0x2a449f['value']=_0x583afe,_0x2a449f[_0x3fd6fb(0x188)]=_0x583afe,_0x59d340[_0x3fd6fb(0xc7)](_0x2a449f);});}function initializeUnits(){const _0x103134=_0x3dc482,_0x369f84=[_0x103134(0x155),_0x103134(0x156),'袋（パック）',_0x103134(0x137),_0x103134(0x94),_0x103134(0x141),'コンテナ','キログラム',_0x103134(0xa6)],_0x32f05c=document[_0x103134(0x88)](_0x103134(0x114));_0x32f05c['innerHTML']='<option\x20value=\x22\x22>選択してください</option>',_0x369f84[_0x103134(0x183)](_0x3c27a3=>{const _0x35920b=_0x103134,_0x52e661=document[_0x35920b(0x110)](_0x35920b(0xa5));_0x52e661[_0x35920b(0x164)]=_0x3c27a3,_0x52e661[_0x35920b(0x188)]=_0x3c27a3,_0x3c27a3==='袋（パック）'&&(_0x52e661[_0x35920b(0x10d)]=!![]),_0x32f05c['appendChild'](_0x52e661);});}function showAlert(_0xdc8b45,_0x5991f4='info',_0x3edb1b=_0x3dc482(0x135)){const _0x23715f=_0x3dc482,_0x1ea450=document[_0x23715f(0x88)](_0x3edb1b);if(!_0x1ea450)return;_0x1ea450[_0x23715f(0xad)]=_0x23715f(0xc3)+_0x5991f4,_0x1ea450[_0x23715f(0x188)]=_0xdc8b45,_0x1ea450['classList'][_0x23715f(0x125)]('hidden'),setTimeout(()=>{const _0x562273=_0x23715f;_0x1ea450[_0x562273(0xc0)][_0x562273(0x178)](_0x562273(0x179));},0xbb8);}function getCurrentDateISO(){const _0x1fdb44=_0x3dc482;return new Date()[_0x1fdb44(0xb2)]()[_0x1fdb44(0x192)]('T')[0x0];}function compressImage(_0x530096,_0x22a31e=0x320,_0x4569b9=0.7){return new Promise(_0x3847ed=>{const _0x295e8d=_0xf8a1,_0x3af65b=document[_0x295e8d(0x110)](_0x295e8d(0xdc)),_0x43ce9a=_0x3af65b[_0x295e8d(0x19a)]('2d'),_0xc75dad=new Image();_0xc75dad[_0x295e8d(0xd4)]=()=>{const _0x326e67=_0x295e8d,_0x4f291a=Math[_0x326e67(0xa9)](_0x22a31e/_0xc75dad[_0x326e67(0xd2)],_0x22a31e/_0xc75dad['height']);_0x3af65b[_0x326e67(0xd2)]=_0xc75dad[_0x326e67(0xd2)]*_0x4f291a,_0x3af65b['height']=_0xc75dad['height']*_0x4f291a,_0x43ce9a[_0x326e67(0xeb)](_0xc75dad,0x0,0x0,_0x3af65b[_0x326e67(0xd2)],_0x3af65b['height']),_0x3847ed(_0x3af65b[_0x326e67(0x1a0)]('image/jpeg',_0x4569b9));},_0xc75dad['src']=URL[_0x295e8d(0x14b)](_0x530096);});}function rgbToHsv(_0x85b740,_0x2ee9dd,_0x209cf6){const _0x1df238=_0x3dc482;_0x85b740/=0xff,_0x2ee9dd/=0xff,_0x209cf6/=0xff;const _0x219296=Math['max'](_0x85b740,_0x2ee9dd,_0x209cf6),_0x1c2b0c=Math[_0x1df238(0xa9)](_0x85b740,_0x2ee9dd,_0x209cf6),_0x3aff1d=_0x219296-_0x1c2b0c;let _0x4fa2ea=0x0;if(_0x3aff1d!==0x0){if(_0x219296===_0x85b740)_0x4fa2ea=(_0x2ee9dd-_0x209cf6)/_0x3aff1d%0x6;else _0x219296===_0x2ee9dd?_0x4fa2ea=(_0x209cf6-_0x85b740)/_0x3aff1d+0x2:_0x4fa2ea=(_0x85b740-_0x2ee9dd)/_0x3aff1d+0x4;}_0x4fa2ea=Math[_0x1df238(0x18e)](_0x4fa2ea*0x3c);if(_0x4fa2ea<0x0)_0x4fa2ea+=0x168;const _0x3f0f73=_0x219296===0x0?0x0:_0x3aff1d/_0x219296,_0x26aafe=_0x219296;return{'h':_0x4fa2ea,'s':_0x3f0f73,'v':_0x26aafe};}class TagInput{constructor(_0x458287,_0x16e172=[]){const _0x475302=_0x3dc482;this[_0x475302(0x149)]=_0x458287,this['selectedTags']=[],this[_0x475302(0x153)]=_0x16e172,this[_0x475302(0x123)]();}[_0x3dc482(0x123)](){const _0x453f0c=_0x3dc482,_0x437889=document['getElementById'](this[_0x453f0c(0x149)]+_0x453f0c(0xe6));if(!_0x437889)return;const _0x314aac=document['getElementById'](this[_0x453f0c(0x149)]+_0x453f0c(0xfe)),_0x5f0ded=document[_0x453f0c(0x88)](this[_0x453f0c(0x149)]+'Input');if(!_0x314aac||!_0x5f0ded)return;this[_0x453f0c(0xda)]=_0x314aac,this['input']=_0x5f0ded,this[_0x453f0c(0x91)][_0x453f0c(0x163)](_0x453f0c(0xa3),_0xd58f2d=>{const _0x1cac25=_0x453f0c;_0xd58f2d[_0x1cac25(0x150)]===_0x1cac25(0x119)&&this['input']['value'][_0x1cac25(0xf8)]()&&(_0xd58f2d['preventDefault'](),this[_0x1cac25(0x180)](this['input'][_0x1cac25(0x164)][_0x1cac25(0xf8)]()),this['input'][_0x1cac25(0x164)]='');}),this['loadSavedTags'](),this['render']();}['addTag'](_0x32abc9){const _0x294c4d=_0x3dc482;!this[_0x294c4d(0x8d)]['includes'](_0x32abc9)&&_0x32abc9[_0x294c4d(0xf8)]()&&(this[_0x294c4d(0x8d)]['push'](_0x32abc9),this[_0x294c4d(0xbf)](),this[_0x294c4d(0x9a)]());}[_0x3dc482(0xd9)](_0x5cdea9){const _0x5b8421=_0x3dc482;this[_0x5b8421(0x8d)]=this[_0x5b8421(0x8d)][_0x5b8421(0x98)](_0x236ffa=>_0x236ffa!==_0x5cdea9),this['render'](),this['save']();}[_0x3dc482(0xbf)](){const _0x300259=_0x3dc482;if(!this[_0x300259(0xda)])return;this[_0x300259(0xda)][_0x300259(0xa2)]=this[_0x300259(0x8d)]['map'](_0x30a007=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22tag\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x30a007+_0x300259(0xc4)+_0x30a007+_0x300259(0xd1))[_0x300259(0x190)](''),this[_0x300259(0xda)][_0x300259(0xf1)](_0x300259(0xca))[_0x300259(0x183)](_0x15842e=>{const _0x40c8d0=_0x300259;_0x15842e[_0x40c8d0(0x163)](_0x40c8d0(0x9c),_0x2a9be7=>{const _0x505a1e=_0x40c8d0;this[_0x505a1e(0xd9)](_0x2a9be7[_0x505a1e(0x17e)]['dataset'][_0x505a1e(0x1a2)]);});});}['save'](){const _0x41bb5a=_0x3dc482;localStorage['setItem'](this[_0x41bb5a(0x149)]+_0x41bb5a(0xa8),JSON[_0x41bb5a(0xde)](this[_0x41bb5a(0x8d)]));}['loadSavedTags'](){const _0x5c8166=_0x3dc482,_0x3a1312=localStorage['getItem'](this['elementId']+_0x5c8166(0xa8));_0x3a1312?this['selectedTags']=JSON[_0x5c8166(0x122)](_0x3a1312):this[_0x5c8166(0x8d)]=[...this['availableOptions']];}[_0x3dc482(0xf3)](){const _0x2843ed=_0x3dc482;return[...this[_0x2843ed(0x8d)]];}}class UserManager{constructor(){const _0x15c6bf=_0x3dc482;this[_0x15c6bf(0xb4)]=this['loadUsers']();}['loadUsers'](){const _0x9094e5=_0x3dc482,_0x3ac778=localStorage[_0x9094e5(0x116)](_0x9094e5(0x12f));return _0x3ac778?JSON[_0x9094e5(0x122)](_0x3ac778):[...AUTH_CONFIG[_0x9094e5(0xb4)]];}['saveUsers'](){const _0x529eb4=_0x3dc482;localStorage['setItem'](_0x529eb4(0x12f),JSON['stringify'](this[_0x529eb4(0xb4)]));}async[_0x3dc482(0x18d)](_0x274ba5,_0x32c1f4,_0x1ea3ce,_0x296166){const _0x161542=_0x3dc482;if(this[_0x161542(0xb4)][_0x161542(0x182)](_0x14ed00=>_0x14ed00['id']===_0x274ba5))throw new Error(_0x161542(0x136));const _0x442ef5=await hashPassword(_0x32c1f4);return this['users'][_0x161542(0x99)]({'id':_0x274ba5,'passHash':_0x442ef5,'role':_0x1ea3ce,'limit':parseInt(_0x296166),'used':0x0}),this[_0x161542(0x112)](),!![];}[_0x3dc482(0xcb)](_0xcb870a,_0x494598){const _0x5cca47=_0x3dc482,_0x556f48=this[_0x5cca47(0xb4)]['find'](_0xca5e01=>_0xca5e01['id']===_0xcb870a);if(!_0x556f48)throw new Error(_0x5cca47(0xac));return Object[_0x5cca47(0xd7)](_0x556f48,_0x494598),this[_0x5cca47(0x112)](),!![];}['deleteUser'](_0x114870){const _0x5e8765=_0x3dc482;return this['users']=this[_0x5e8765(0xb4)]['filter'](_0x36ea88=>_0x36ea88['id']!==_0x114870),this[_0x5e8765(0x112)](),!![];}[_0x3dc482(0xcc)](){const _0xd0c27d=_0x3dc482;return this[_0xd0c27d(0xb4)][_0xd0c27d(0x17d)](_0x25d53f=>({..._0x25d53f,'passHash':'***'}));}async[_0x3dc482(0xae)](_0x17e3a0,_0x4570ab){const _0x4afa65=_0x3dc482,_0x4bd74e=await hashPassword(_0x4570ab),_0xa694ea=this['users'][_0x4afa65(0x182)](_0x509436=>_0x509436['id']===_0x17e3a0&&_0x509436['passHash']===_0x4bd74e);return _0xa694ea||null;}['updateUsage'](_0x2ed711){const _0x518887=_0x3dc482,_0x4688e0=this[_0x518887(0xb4)][_0x518887(0x182)](_0x14a74f=>_0x14a74f['id']===_0x2ed711);_0x4688e0&&(_0x4688e0[_0x518887(0xdb)]=(_0x4688e0['used']||0x0)+0x1,this[_0x518887(0x112)]());}}async function handleLogin(_0xb3e751){const _0x541ff9=_0x3dc482;_0xb3e751[_0x541ff9(0xab)]();const _0x1e1d72=document[_0x541ff9(0x88)](_0x541ff9(0xd8))[_0x541ff9(0x164)],_0xd26fe0=document[_0x541ff9(0x88)](_0x541ff9(0x118))[_0x541ff9(0x164)],_0x421d01=document['getElementById']('loginBtn'),_0x3ad871=document[_0x541ff9(0x88)](_0x541ff9(0x191));if(!_0x1e1d72||!_0xd26fe0){showAlert(_0x541ff9(0x9e),'warning',_0x541ff9(0xe4));return;}_0x421d01['style'][_0x541ff9(0x146)]=_0x541ff9(0x105),_0x3ad871[_0x541ff9(0xc0)][_0x541ff9(0x125)](_0x541ff9(0x179));try{const _0x293a5f=await userManager['authenticate'](_0x1e1d72,_0xd26fe0);if(_0x293a5f){if(_0x293a5f[_0x541ff9(0xdb)]>=_0x293a5f['limit']){showAlert(_0x541ff9(0xb9),'danger',_0x541ff9(0xe4)),_0x421d01['style'][_0x541ff9(0x146)]=_0x541ff9(0x133),_0x3ad871['classList']['add'](_0x541ff9(0x179));return;}currentUser=_0x293a5f,userManager[_0x541ff9(0x104)](_0x1e1d72),document[_0x541ff9(0x88)](_0x541ff9(0x17c))[_0x541ff9(0x188)]=_0x293a5f['id'],document[_0x541ff9(0x88)](_0x541ff9(0x196))[_0x541ff9(0x188)]=getRoleDisplay(_0x293a5f['role']),document[_0x541ff9(0x95)]['className']=_0x541ff9(0x145)+_0x293a5f[_0x541ff9(0xb7)],(_0x293a5f['role']===_0x541ff9(0xe1)||_0x293a5f[_0x541ff9(0xb7)]==='expert')&&document['getElementById'](_0x541ff9(0x13b))[_0x541ff9(0xc0)][_0x541ff9(0x125)](_0x541ff9(0x179)),document[_0x541ff9(0x88)](_0x541ff9(0x19e))[_0x541ff9(0xc0)][_0x541ff9(0x178)]('hidden'),document['getElementById'](_0x541ff9(0x113))[_0x541ff9(0xc0)]['remove']('hidden'),showAlert(_0x293a5f['id']+_0x541ff9(0x17f),_0x541ff9(0xa4));}else showAlert(_0x541ff9(0x85),_0x541ff9(0x19c),_0x541ff9(0xe4));}catch(_0x16eefe){showAlert('認証処理中にエラーが発生しました。',_0x541ff9(0x19c),_0x541ff9(0xe4)),console[_0x541ff9(0x101)](_0x16eefe);}finally{_0x421d01[_0x541ff9(0x172)][_0x541ff9(0x146)]=_0x541ff9(0x133),_0x3ad871['classList'][_0x541ff9(0x178)]('hidden');}}function handleLogout(){const _0x421238=_0x3dc482;currentUser=null,currentImageBase64=null,analysisResult=null,visualJudgment=null,document[_0x421238(0x88)](_0x421238(0x19e))[_0x421238(0xc0)][_0x421238(0x125)](_0x421238(0x179)),document[_0x421238(0x88)](_0x421238(0x113))[_0x421238(0xc0)]['add'](_0x421238(0x179)),document['body'][_0x421238(0xad)]='',document[_0x421238(0x88)](_0x421238(0xd8))[_0x421238(0x164)]='',document['getElementById'](_0x421238(0x118))['value']='',document[_0x421238(0x88)]('loginBtn')[_0x421238(0x172)][_0x421238(0x146)]=_0x421238(0x133),document[_0x421238(0x88)](_0x421238(0x191))[_0x421238(0xc0)][_0x421238(0x178)](_0x421238(0x179)),handleReset();}async function handleImageInput(_0x1219a4){const _0x31f273=_0x3dc482,_0x5d3033=_0x1219a4[_0x31f273(0x17e)][_0x31f273(0xf7)][0x0];if(!_0x5d3033)return;try{showAlert('画像を処理中...','info');const _0x1ce7ad=await compressImage(_0x5d3033);currentImageBase64=_0x1ce7ad;const _0x265a8f=document[_0x31f273(0x88)]('imagePreview');_0x265a8f[_0x31f273(0xa2)]=_0x31f273(0xa0)+_0x1ce7ad+_0x31f273(0x16b),document[_0x31f273(0x88)]('visualJudgmentCard')[_0x31f273(0xc0)][_0x31f273(0x125)](_0x31f273(0x179)),document[_0x31f273(0x88)](_0x31f273(0x187))[_0x31f273(0x107)]=![],document['getElementById'](_0x31f273(0x187))[_0x31f273(0xc0)][_0x31f273(0x178)](_0x31f273(0x140)),showAlert(_0x31f273(0x13c),_0x31f273(0xa4));}catch(_0x2df620){showAlert(_0x31f273(0xb8),_0x31f273(0x19c)),console[_0x31f273(0x101)](_0x2df620);}}function _0x329f(){const _0x56bca6=['selectedTags','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>スポット</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>','褐色%','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','input','管理者','5f24eab8e0e8aa6ea81c6af7a38e6a5cd8a17aff0ce70e81b3e88f574b45602c','ケース','body','365FGcXDb','\x22\x20style=\x22background:\x20','filter','push','save','ユーザー情報を更新しました。','click','greenPercent','ユーザーIDとパスワードを入力してください。','change','<img\x20src=\x22','ライトグリーン','innerHTML','keydown','success','option','その他','toString','_tags','min','その他%','preventDefault','ユーザーが見つかりません','className','authenticate','店舗名','brownPercent','analyzing','toISOString','追熟有望期の最適色','users','other','新しい使用回数上限を入力してください:','role','画像の処理中にエラーが発生しました。','使用回数の上限に達しています。管理者にお問い合わせください。','banana-report-','info','.csv','level','フォームをリセットしました。','render','classList','color','expert1','alert\x20alert-','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20data-tag=\x22','1jtnJTI','56f1a1f8fe2c2a51ca558806397d533c2da04c2f987ce4e7321902d4ae20c228','appendChild','getImageData','deliveryDate','.remove','editUser','getUsers','クレーム種別','black','pixels','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>その他</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>','\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','width','画像を選択してください。','onload','追熟が必要です','stage','assign','userId','removeTag','tagsContainer','used','canvas','無制限','stringify','\x27)\x22>削除</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','納品日','admin','code2','20288NwxKBL','authAlert','スター','Container','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>褐色</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>','claimAmount','newUserId','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','drawImage','claimQuantity','スポットが広がった状態','301525igYpFn','ユーザーを追加しました。','ハーフグリーン','querySelectorAll','claimType','getTags','撮影日',';\x20border-color:\x20','exportBtn','files','trim','length','.color-item','緑色%','yellow','目視メモ','Tags','replace','max','error','食べ頃・販売適期','DOMContentLoaded','updateUsage','none','padStart','disabled','シュガースポットが現れた状態','おされ＆傷','currentTarget','yellowGreenPercent','imagePreview','selected','CSVファイルをダウンロードしました。','resultCard','createElement','.visual-color-item','saveUsers','mainScreen','claimUnit','claimTypes','getItem','text/csv;charset=utf-8;','password','Enter','yellowPercent','#8BC34A','早期消費推奨','信頼度','チェーン名','requiredFields','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>緑色</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>','stageDescription','parse','init','white','remove','目視判定','newUserRole','submit','code3','smooth','includes','くされ','recommendation','#4CAF50','banana_users','name','ms</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','colorLevel','block','lastLogin','mainAlert','同じIDのユーザーが既に存在します','箱（ボックス）','otherPercent','1628682hqjDGh','140jBVFkJ','adminBtnGroup','画像が読み込まれました。解析を実行してください。','黄ぶく','adminPanel','1685292efjCdb','btn-pulse','パレット','warning','newUserPassword','不一致','user-','display',';\x22></div>\x0a\x20\x20\x20\x20','code1','elementId','解析中にエラーが発生しました:\x20','createObjectURL','download','緑色の部分と黄色の部分が混在','解析者','#2E7D32','key','カラー','newUserLimit','availableOptions','CSV出力中にエラーが発生しました。','本（個別）','房（束）','resultContent','resetBtn','スポット%','黄色%','全体が緑色の状態','大部分が黄色くなった状態','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22role-badge\x20role-','processTime','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','adminSettingsBtn','1685630aIYRsf','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<table\x20class=\x22user-table\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ユーザーID</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>権限</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ログイン回数</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>最終ログイン</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>使用制限</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>操作</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','addEventListener','value','height','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20','解析日時','random','加工初期の色','cameraInput','\x22\x20alt=\x22選択された画像\x22>','limit','closeAdminBtn','目視判定:\x20','spot','from','green','style','青ぶく','captureDate','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>黄緑色</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>解析ピクセル数</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>','storeName','add','hidden','visualJudgmentMemo','dataset','userName','map','target','さん、ようこそ！','addTag','甘味が増した食べ頃','find','forEach','fileInput','logoutBtn','message','analyzeBtn','textContent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22color-circle\x20color-','291514NcbOHA','1089JZtxdU','ripenessVisual','addUser','round','chainName','join','loginLoading','split','href','02cd43946b94922972f5d1ed98c5e168895967aef05ee4a8fa3266d0e41f0111','ja-JP','userRole','#FFC107','spotPercent','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-warning\x20btn-sm\x22\x20onclick=\x22editUser(\x27','getContext','app-selected','danger','mainLoading','authScreen','stageRecommendation','toDataURL','商品名','tag','confidence','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>黄色</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>','deleteUser','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>信頼度</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>','yellowGreen','productName','encode','expert','scrollIntoView','user1','#795548','ユーザーIDまたはパスワードが正しくありません。','SHA-256','オールグリーン','getElementById','汎用コード1','description','ユーザー\x20\x22','brown'];_0x329f=function(){return _0x56bca6;};return _0x329f();}function handleVisualJudgment(_0x249601){const _0x49cd7f=_0x3dc482,_0x4441ab=parseInt(_0x249601[_0x49cd7f(0x10a)][_0x49cd7f(0x17b)][_0x49cd7f(0xbd)]),_0x3e8d3c=document[_0x49cd7f(0x88)]('visualJudgmentMemo')['value'];document[_0x49cd7f(0xf1)](_0x49cd7f(0x111))['forEach'](_0x315911=>{const _0x51eded=_0x49cd7f;_0x315911['classList'][_0x51eded(0x125)](_0x51eded(0x10d));}),_0x249601['currentTarget'][_0x49cd7f(0xc0)][_0x49cd7f(0x178)](_0x49cd7f(0x10d));const _0x4cf742=getColorInfo(_0x4441ab);visualJudgment={'level':_0x4441ab,'stage':_0x4cf742['name']||_0x49cd7f(0x151)+_0x4441ab,'memo':_0x3e8d3c,'timestamp':new Date()[_0x49cd7f(0xb2)]()},showAlert(_0x49cd7f(0x16e)+visualJudgment[_0x49cd7f(0xd6)],_0x49cd7f(0xbb));}function _0xf8a1(_0x4f3d02,_0x2ec59f){const _0x329fd7=_0x329f();return _0xf8a1=function(_0xf8a134,_0x2d93de){_0xf8a134=_0xf8a134-0x80;let _0x5c5f0c=_0x329fd7[_0xf8a134];return _0x5c5f0c;},_0xf8a1(_0x4f3d02,_0x2ec59f);}function analyzeImageOffline(_0x4b6a56){return new Promise(_0x498f8e=>{setTimeout(()=>{const _0x2611e9=_0xf8a1,_0x28c0c2=document[_0x2611e9(0x110)](_0x2611e9(0xdc)),_0x5d2f49=_0x28c0c2['getContext']('2d'),_0x220ebf=new Image();_0x220ebf['onload']=()=>{const _0x37ba3f=_0x2611e9;_0x28c0c2[_0x37ba3f(0xd2)]=_0x220ebf[_0x37ba3f(0xd2)],_0x28c0c2['height']=_0x220ebf[_0x37ba3f(0x165)],_0x5d2f49[_0x37ba3f(0xeb)](_0x220ebf,0x0,0x0);const _0x447d46=_0x5d2f49[_0x37ba3f(0xc8)](0x0,0x0,_0x28c0c2[_0x37ba3f(0xd2)],_0x28c0c2[_0x37ba3f(0x165)]),_0x5d2aaa=_0x447d46['data'],_0x5ed145={'green':0x0,'yellowGreen':0x0,'yellow':0x0,'spot':0x0,'brown':0x0,'other':0x0};let _0x4b52e2=0x0;for(let _0x38d5bb=0x0;_0x38d5bb<_0x5d2aaa[_0x37ba3f(0xf9)];_0x38d5bb+=0x4){const _0x1fb0a9=_0x5d2aaa[_0x38d5bb],_0x4891f2=_0x5d2aaa[_0x38d5bb+0x1],_0x23570d=_0x5d2aaa[_0x38d5bb+0x2],_0x141b49=rgbToHsv(_0x1fb0a9,_0x4891f2,_0x23570d);if(_0x141b49['v']>0.95&&_0x141b49['s']<0.05)continue;let _0x32ad35=_0x37ba3f(0xb5);if(_0x141b49['v']<0.25)_0x32ad35=_0x37ba3f(0x8c);else{if(_0x141b49['s']<0.1)_0x32ad35=_0x37ba3f(0xb5);else{if(_0x141b49['h']>=0x50&&_0x141b49['h']<=0x8c&&_0x141b49['s']>=0.3)_0x32ad35=_0x37ba3f(0x171);else{if(_0x141b49['h']>=0x41&&_0x141b49['h']<=0x50&&_0x141b49['s']>=0.28)_0x32ad35=_0x37ba3f(0x1a7);else{if(_0x141b49['h']>=0x2d&&_0x141b49['h']<=0x41&&_0x141b49['s']>=0.32)_0x32ad35=_0x37ba3f(0xfc);else{if(_0x141b49['h']>=0x14&&_0x141b49['h']<=0x28&&_0x141b49['v']>=0.3&&_0x141b49['v']<=0.5)_0x32ad35=_0x37ba3f(0x16f);else{if(_0x141b49['h']>=0x14&&_0x141b49['h']<=0x28&&_0x141b49['s']<=0.3)_0x32ad35='brown';else _0x141b49['h']>=0x1e&&_0x141b49['h']<=0x5a&&(_0x32ad35=_0x37ba3f(0xfc));}}}}}}_0x5ed145[_0x32ad35]++,_0x4b52e2++;}const _0x269587={};for(const _0x5efdde in _0x5ed145){_0x269587[_0x5efdde]=_0x5ed145[_0x5efdde]/_0x4b52e2*0x64;}const _0x50eb53=determineRipenessStageLocal(_0x269587),_0x377378=Math['min'](Math[_0x37ba3f(0x18e)](Math[_0x37ba3f(0x100)](...Object['values'](_0x269587))+_0x4b52e2/0x3e8),0x64);_0x498f8e({'colorLevel':_0x50eb53['level'],'stage':_0x50eb53[_0x37ba3f(0x130)]||_0x37ba3f(0x151)+_0x50eb53['level'],'confidence':_0x377378,'description':_0x50eb53[_0x37ba3f(0x8a)],'recommendation':_0x50eb53['recommendation'],'color':_0x50eb53[_0x37ba3f(0xc1)],'textColor':_0x50eb53['textColor'],'greenPercent':Math['round'](_0x269587[_0x37ba3f(0x171)]*0x64)/0x64,'yellowGreenPercent':Math[_0x37ba3f(0x18e)](_0x269587[_0x37ba3f(0x1a7)]*0x64)/0x64,'yellowPercent':Math[_0x37ba3f(0x18e)](_0x269587[_0x37ba3f(0xfc)]*0x64)/0x64,'spotPercent':Math[_0x37ba3f(0x18e)](_0x269587['spot']*0x64)/0x64,'brownPercent':Math[_0x37ba3f(0x18e)](_0x269587[_0x37ba3f(0x8c)]*0x64)/0x64,'otherPercent':Math['round'](_0x269587['other']*0x64)/0x64,'pixels':_0x4b52e2,'processTime':Math[_0x37ba3f(0x168)]()*0x1f4+0xc8,'timestamp':new Date()[_0x37ba3f(0xb2)](),'isOffline':!![]});},_0x220ebf['src']=_0x4b6a56;},0x1f4);});}function determineRipenessStageLocal(_0x433e09){const _0x2e22b6=_0x3dc482;if(_0x433e09[_0x2e22b6(0x171)]>=0x50)return getColorInfo(0x2);if(_0x433e09[_0x2e22b6(0x171)]>=0x3c)return getColorInfo(0x3);if(_0x433e09[_0x2e22b6(0x171)]>=0x1e&&_0x433e09[_0x2e22b6(0x1a7)]>=0x14)return getColorInfo(0x4);if(_0x433e09['yellow']>=0x28&&_0x433e09[_0x2e22b6(0x171)]<0x1e)return getColorInfo(0x5);if(_0x433e09[_0x2e22b6(0xfc)]>=0x46)return getColorInfo(0x6);if(_0x433e09['spot']>=0x5&&_0x433e09['spot']<0xf)return getColorInfo(0x7);if(_0x433e09[_0x2e22b6(0x16f)]>=0xf)return getColorInfo(0x8);if(_0x433e09[_0x2e22b6(0x8c)]>=0x14)return getColorInfo(0x9);return getColorInfo(0x5);}async function handleAnalyze(){const _0x5dd252=_0x3dc482;if(!currentImageBase64){showAlert(_0x5dd252(0xd3),_0x5dd252(0x142));return;}const _0x1d66f7=document[_0x5dd252(0x88)](_0x5dd252(0x187)),_0x423766=document[_0x5dd252(0x88)](_0x5dd252(0x19d));_0x1d66f7[_0x5dd252(0x107)]=!![],_0x1d66f7[_0x5dd252(0xc0)]['add'](_0x5dd252(0xb1)),_0x1d66f7[_0x5dd252(0xc0)]['remove'](_0x5dd252(0x140)),_0x423766[_0x5dd252(0xc0)][_0x5dd252(0x125)](_0x5dd252(0x179));try{showAlert('画像を解析中...',_0x5dd252(0xbb)),analysisResult=await analyzeImageOffline(currentImageBase64),displayResults(analysisResult),document[_0x5dd252(0x88)]('exportBtn')[_0x5dd252(0x107)]=![],showAlert('解析が完了しました。','success');}catch(_0x45c1bf){showAlert(_0x5dd252(0x14a)+_0x45c1bf[_0x5dd252(0x186)],_0x5dd252(0x19c)),console[_0x5dd252(0x101)](_0x45c1bf);}finally{_0x1d66f7[_0x5dd252(0x107)]=![],_0x1d66f7[_0x5dd252(0xc0)]['remove'](_0x5dd252(0xb1)),_0x423766['classList'][_0x5dd252(0x178)](_0x5dd252(0x179));}}function displayResults(_0x35f0e1){const _0x38a289=_0x3dc482,_0x23e90c=document[_0x38a289(0x88)](_0x38a289(0x10f)),_0x28951d=document[_0x38a289(0x88)]('stageValue'),_0x198c72=document['getElementById'](_0x38a289(0x18c)),_0x2b73cb=document[_0x38a289(0x88)](_0x38a289(0x121)),_0x81f043=document['getElementById'](_0x38a289(0x19f)),_0x375a4e=document[_0x38a289(0x88)](_0x38a289(0x157));_0x28951d[_0x38a289(0x188)]=_0x35f0e1['stage'],_0x28951d[_0x38a289(0x172)][_0x38a289(0xc1)]=_0x35f0e1[_0x38a289(0xc1)],_0x2b73cb[_0x38a289(0x188)]=_0x35f0e1[_0x38a289(0x8a)],_0x81f043['textContent']=_0x35f0e1[_0x38a289(0x12d)],_0x198c72[_0x38a289(0xa2)]=_0x38a289(0x189)+_0x35f0e1[_0x38a289(0x132)]+_0x38a289(0x97)+_0x35f0e1[_0x38a289(0xc1)]+_0x38a289(0xf5)+_0x35f0e1['color']+_0x38a289(0x147),_0x375a4e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>カラーコード</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>'+_0x35f0e1['colorLevel']+_0x38a289(0x1a6)+_0x35f0e1['confidence']+_0x38a289(0x120)+_0x35f0e1[_0x38a289(0x9d)]+_0x38a289(0x175)+_0x35f0e1[_0x38a289(0x10b)]+_0x38a289(0x1a4)+_0x35f0e1[_0x38a289(0x11a)]+_0x38a289(0x8e)+_0x35f0e1['spotPercent']+_0x38a289(0xe7)+_0x35f0e1[_0x38a289(0xb0)]+_0x38a289(0xd0)+_0x35f0e1[_0x38a289(0x138)]+_0x38a289(0x176)+_0x35f0e1['pixels']['toLocaleString']()+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>処理時間</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>'+Math['round'](_0x35f0e1[_0x38a289(0x15e)])+_0x38a289(0x131),document['querySelectorAll'](_0x38a289(0xfa))['forEach'](_0x3bd1f3=>{const _0x2a3d93=_0x38a289;_0x3bd1f3[_0x2a3d93(0xc0)][_0x2a3d93(0x125)]('app-selected'),parseInt(_0x3bd1f3[_0x2a3d93(0x17b)][_0x2a3d93(0xbd)])===_0x35f0e1[_0x2a3d93(0x132)]&&_0x3bd1f3[_0x2a3d93(0xc0)][_0x2a3d93(0x178)]('app-selected');}),_0x23e90c[_0x38a289(0xc0)]['remove'](_0x38a289(0x179)),_0x23e90c[_0x38a289(0x82)]({'behavior':_0x38a289(0x12a)});}function generateCSV(){const _0x3b8a90=_0x3dc482,_0x582a23='\ufeff',_0x23f808=[_0x3b8a90(0xcd),_0x3b8a90(0xe0),_0x3b8a90(0xf4),_0x3b8a90(0x1a1),_0x3b8a90(0x11e),_0x3b8a90(0xaf),'数量','単位',_0x3b8a90(0x89),'汎用コード2','汎用コード3','希望クレーム請求金額','カラーコード','熟度段階',_0x3b8a90(0x11d),_0x3b8a90(0xfb),'黄緑色%',_0x3b8a90(0x15a),_0x3b8a90(0x159),_0x3b8a90(0x8f),_0x3b8a90(0xaa),'解析ピクセル数','処理時間ms',_0x3b8a90(0x126),_0x3b8a90(0xfd),'判定一致',_0x3b8a90(0x14e),_0x3b8a90(0x167)];let _0x18cf3e='-';visualJudgment&&analysisResult&&(_0x18cf3e=analysisResult[_0x3b8a90(0x132)]===visualJudgment[_0x3b8a90(0xbd)]?'一致':_0x3b8a90(0x144));const _0x3ccfc0=analysisResult?getColorInfo(analysisResult[_0x3b8a90(0x132)]):null,_0xf7d542=visualJudgment?getColorInfo(visualJudgment['level']):null,_0x4ee50d=[document['getElementById'](_0x3b8a90(0xf2))[_0x3b8a90(0x164)]||'',document[_0x3b8a90(0x88)]('deliveryDate')[_0x3b8a90(0x164)]||'',document[_0x3b8a90(0x88)]('captureDate')[_0x3b8a90(0x164)]||'',document[_0x3b8a90(0x88)](_0x3b8a90(0x1a8))['value']||'',document[_0x3b8a90(0x88)](_0x3b8a90(0x18f))[_0x3b8a90(0x164)]||'',document[_0x3b8a90(0x88)](_0x3b8a90(0x177))[_0x3b8a90(0x164)]||'',document[_0x3b8a90(0x88)](_0x3b8a90(0xec))[_0x3b8a90(0x164)]||'',document[_0x3b8a90(0x88)](_0x3b8a90(0x114))[_0x3b8a90(0x164)]||'',document['getElementById'](_0x3b8a90(0x148))['value']||'',document[_0x3b8a90(0x88)]('code2')[_0x3b8a90(0x164)]||'',document[_0x3b8a90(0x88)]('code3')[_0x3b8a90(0x164)]||'',document[_0x3b8a90(0x88)](_0x3b8a90(0xe8))[_0x3b8a90(0x164)]||'',_0x3ccfc0?_0x3ccfc0['level']:'',_0x3ccfc0?_0x3ccfc0[_0x3b8a90(0x130)]:'',analysisResult?analysisResult[_0x3b8a90(0x1a3)]||0x64:'',analysisResult?analysisResult['greenPercent']||0x0:'',analysisResult?analysisResult['yellowGreenPercent']||0x0:'',analysisResult?analysisResult[_0x3b8a90(0x11a)]||0x0:'',analysisResult?analysisResult[_0x3b8a90(0x198)]||0x0:'',analysisResult?analysisResult[_0x3b8a90(0xb0)]||0x0:'',analysisResult?analysisResult[_0x3b8a90(0x138)]||0x0:'',analysisResult?analysisResult[_0x3b8a90(0xcf)]||0x0:'',analysisResult?Math[_0x3b8a90(0x18e)](analysisResult['processTime'])||0x0:'',_0xf7d542?_0x3b8a90(0x151)+_0xf7d542[_0x3b8a90(0xbd)]+_0xf7d542['name']:'',document[_0x3b8a90(0x88)]('visualJudgmentMemo')?.[_0x3b8a90(0x164)]||'',_0x18cf3e,currentUser?.['id']||'',new Date()['toLocaleString'](_0x3b8a90(0x195))];return _0x582a23+_0x23f808[_0x3b8a90(0x190)](',')+'\x0a'+_0x4ee50d['map'](escapeCSV)[_0x3b8a90(0x190)](',');}function escapeCSV(_0x584df3){const _0xf220b=_0x3dc482;if(_0x584df3===null||_0x584df3===undefined)return'';_0x584df3=String(_0x584df3);if(_0x584df3[_0xf220b(0x12b)](',')||_0x584df3[_0xf220b(0x12b)]('\x22')||_0x584df3[_0xf220b(0x12b)]('\x0a'))return'\x22'+_0x584df3[_0xf220b(0xff)](/"/g,'\x22\x22')+'\x22';return _0x584df3;}function handleExport(){const _0x295756=_0x3dc482;if(!analysisResult){showAlert('解析結果がありません。',_0x295756(0x142));return;}try{const _0x470126=generateCSV(),_0x38143a=new Blob([_0x470126],{'type':_0x295756(0x117)}),_0x285e7e=document[_0x295756(0x110)]('a'),_0x52c2d3=new Date()[_0x295756(0xb2)]()[_0x295756(0xff)](/[:.]/g,'-')['slice'](0x0,0x13);_0x285e7e[_0x295756(0x14c)]=_0x295756(0xba)+_0x52c2d3+_0x295756(0xbc),_0x285e7e[_0x295756(0x193)]=URL[_0x295756(0x14b)](_0x38143a),_0x285e7e[_0x295756(0x9c)](),showAlert(_0x295756(0x10e),_0x295756(0xa4));}catch(_0x4ff396){showAlert(_0x295756(0x154),_0x295756(0x19c)),console[_0x295756(0x101)](_0x4ff396);}}function handleReset(){const _0x4f3587=_0x3dc482;currentImageBase64=null,analysisResult=null,visualJudgment=null,document[_0x4f3587(0x88)](_0x4f3587(0x10c))[_0x4f3587(0xa2)]='<div\x20class=\x22image-placeholder\x22>画像が選択されていません</div>',document[_0x4f3587(0x88)](_0x4f3587(0x16a))['value']='',document[_0x4f3587(0x88)](_0x4f3587(0x184))[_0x4f3587(0x164)]='',document[_0x4f3587(0xf1)](_0x4f3587(0x111))[_0x4f3587(0x183)](_0x1d6514=>{const _0x58a398=_0x4f3587;_0x1d6514[_0x58a398(0xc0)][_0x58a398(0x125)](_0x58a398(0x10d));}),document[_0x4f3587(0x88)](_0x4f3587(0x17a))[_0x4f3587(0x164)]='',document['getElementById']('visualJudgmentCard')[_0x4f3587(0xc0)]['add'](_0x4f3587(0x179)),document[_0x4f3587(0x88)](_0x4f3587(0x187))['disabled']=!![],document['getElementById'](_0x4f3587(0x187))[_0x4f3587(0xc0)][_0x4f3587(0x125)](_0x4f3587(0x140),_0x4f3587(0xb1)),document[_0x4f3587(0x88)](_0x4f3587(0xf6))[_0x4f3587(0x107)]=!![],document[_0x4f3587(0x88)](_0x4f3587(0x10f))[_0x4f3587(0xc0)]['add'](_0x4f3587(0x179)),document[_0x4f3587(0xf1)](_0x4f3587(0xfa))['forEach'](_0x296cc1=>{const _0x5b5704=_0x4f3587;_0x296cc1[_0x5b5704(0xc0)][_0x5b5704(0x125)](_0x5b5704(0x19b));});const _0x52a35e=getCurrentDateISO();document[_0x4f3587(0x88)](_0x4f3587(0xf2))['value']='',document[_0x4f3587(0x88)](_0x4f3587(0xc9))['value']=_0x52a35e,document[_0x4f3587(0x88)]('captureDate')[_0x4f3587(0x164)]=_0x52a35e,document['getElementById']('productName')[_0x4f3587(0x164)]='',document[_0x4f3587(0x88)](_0x4f3587(0x18f))[_0x4f3587(0x164)]='',document['getElementById'](_0x4f3587(0x177))[_0x4f3587(0x164)]='',document['getElementById'](_0x4f3587(0xec))['value']='',document[_0x4f3587(0x88)](_0x4f3587(0x114))[_0x4f3587(0x164)]='袋（パック）',document[_0x4f3587(0x88)](_0x4f3587(0x148))[_0x4f3587(0x164)]='',document[_0x4f3587(0x88)](_0x4f3587(0xe2))['value']='',document[_0x4f3587(0x88)](_0x4f3587(0x129))[_0x4f3587(0x164)]='',document[_0x4f3587(0x88)](_0x4f3587(0xe8))[_0x4f3587(0x164)]='',showAlert(_0x4f3587(0xbe),_0x4f3587(0xbb));}function getRoleDisplay(_0x249fa9){const _0x297a96=_0x3dc482,_0x54c152={'admin':_0x297a96(0x92),'expert':'エキスパート','user':'一般'};return _0x54c152[_0x249fa9]||_0x249fa9;}function renderUserTable(){const _0x2766cc=_0x3dc482,_0x55dff7=userManager[_0x2766cc(0xcc)](),_0x25e576=_0x2766cc(0x162)+_0x55dff7[_0x2766cc(0x17d)](_0x42d44d=>_0x2766cc(0x90)+_0x42d44d['id']+_0x2766cc(0x15d)+_0x42d44d['role']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+getRoleDisplay(_0x42d44d['role'])+_0x2766cc(0x15f)+(_0x42d44d[_0x2766cc(0xdb)]||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x42d44d[_0x2766cc(0x134)]||'-')+_0x2766cc(0xea)+(_0x42d44d[_0x2766cc(0x16c)]===-0x1?_0x2766cc(0xdd):(_0x42d44d['used']||0x0)+'/'+_0x42d44d['limit'])+_0x2766cc(0x199)+_0x42d44d['id']+'\x27)\x22>編集</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x22\x20onclick=\x22deleteUser(\x27'+_0x42d44d['id']+_0x2766cc(0xdf))[_0x2766cc(0x190)]('')+_0x2766cc(0x166);document[_0x2766cc(0x88)]('userTableContainer')[_0x2766cc(0xa2)]=_0x25e576;}window[_0x3dc482(0xcb)]=function(_0x49166f){const _0x4a46e8=_0x3dc482,_0x11b83f=userManager[_0x4a46e8(0xb4)][_0x4a46e8(0x182)](_0x25497a=>_0x25497a['id']===_0x49166f);if(!_0x11b83f)return;const _0x15af53=prompt(_0x4a46e8(0xb6),_0x11b83f['limit']);if(_0x15af53&&!isNaN(_0x15af53))try{userManager[_0x4a46e8(0xcb)](_0x49166f,{'limit':parseInt(_0x15af53)}),renderUserTable(),showAlert(_0x4a46e8(0x9b),'success');}catch(_0x11097a){showAlert(_0x11097a[_0x4a46e8(0x186)],_0x4a46e8(0x19c));}},window[_0x3dc482(0x1a5)]=function(_0x33786d){const _0x10ba46=_0x3dc482;if(confirm(_0x10ba46(0x8b)+_0x33786d+'\x22\x20を削除しますか？'))try{userManager[_0x10ba46(0x1a5)](_0x33786d),renderUserTable(),showAlert('ユーザーを削除しました。',_0x10ba46(0xa4));}catch(_0x1b9e18){showAlert(_0x1b9e18[_0x10ba46(0x186)],_0x10ba46(0x19c));}};async function handleAddUser(){const _0x4447d4=_0x3dc482,_0x262efb=document[_0x4447d4(0x88)](_0x4447d4(0xe9))['value'][_0x4447d4(0xf8)](),_0x305c43=document['getElementById'](_0x4447d4(0x143))[_0x4447d4(0x164)],_0x333c40=document[_0x4447d4(0x88)]('newUserRole')[_0x4447d4(0x164)],_0x2e7890=document['getElementById'](_0x4447d4(0x152))['value'];if(!_0x262efb||!_0x305c43){showAlert(_0x4447d4(0x9e),_0x4447d4(0x142));return;}try{await userManager['addUser'](_0x262efb,_0x305c43,_0x333c40,_0x2e7890),document['getElementById']('newUserId')['value']='',document[_0x4447d4(0x88)](_0x4447d4(0x143))['value']='',document[_0x4447d4(0x88)](_0x4447d4(0x127))[_0x4447d4(0x164)]='user',document['getElementById'](_0x4447d4(0x152))[_0x4447d4(0x164)]='100',renderUserTable(),showAlert(_0x4447d4(0xef),_0x4447d4(0xa4));}catch(_0x406090){showAlert(_0x406090['message'],_0x4447d4(0x19c));}}function initializeAdminPanel(){const _0x194cd7=_0x3dc482;currentUser&&currentUser[_0x194cd7(0xb7)]===_0x194cd7(0xe1)&&(!tagInputComponents[_0x194cd7(0x11f)]&&(tagInputComponents[_0x194cd7(0x11f)]=new TagInput('requiredFields',['クレーム種別',_0x194cd7(0xe0),_0x194cd7(0x1a1)])),!tagInputComponents['claimTypes']&&(tagInputComponents[_0x194cd7(0x115)]=new TagInput(_0x194cd7(0x115),['過熟','未熟',_0x194cd7(0x12c),_0x194cd7(0x109),'カビ',_0x194cd7(0x173),_0x194cd7(0x13d)])),renderUserTable()),document[_0x194cd7(0x88)]('addUserBtn')[_0x194cd7(0x163)](_0x194cd7(0x9c),handleAddUser);}function initializeApp(){const _0x2a2fdf=_0x3dc482,_0x289cd5=getCurrentDateISO();document['getElementById'](_0x2a2fdf(0xc9))[_0x2a2fdf(0x164)]=_0x289cd5,document[_0x2a2fdf(0x88)](_0x2a2fdf(0x174))[_0x2a2fdf(0x164)]=_0x289cd5,initializeClaimTypes(),initializeUnits(),userManager=new UserManager(),setupEventListeners();}function setupEventListeners(){const _0x14502b=_0x3dc482;document[_0x14502b(0x88)]('loginForm')[_0x14502b(0x163)](_0x14502b(0x128),handleLogin),document[_0x14502b(0x88)](_0x14502b(0x185))[_0x14502b(0x163)]('click',handleLogout),document[_0x14502b(0x88)]('cameraInput')[_0x14502b(0x163)]('change',handleImageInput),document['getElementById']('fileInput')['addEventListener'](_0x14502b(0x9f),handleImageInput),document['querySelectorAll'](_0x14502b(0x111))[_0x14502b(0x183)](_0xa4d9b4=>{const _0x5241c0=_0x14502b;_0xa4d9b4['addEventListener'](_0x5241c0(0x9c),handleVisualJudgment);}),document[_0x14502b(0x88)](_0x14502b(0x187))[_0x14502b(0x163)]('click',handleAnalyze),document[_0x14502b(0x88)]('exportBtn')[_0x14502b(0x163)](_0x14502b(0x9c),handleExport),document[_0x14502b(0x88)](_0x14502b(0x158))['addEventListener']('click',handleReset);const _0x2f2e46=document[_0x14502b(0x88)](_0x14502b(0x160));_0x2f2e46&&_0x2f2e46[_0x14502b(0x163)]('click',()=>{const _0x57749b=_0x14502b;document[_0x57749b(0x88)](_0x57749b(0x13e))[_0x57749b(0xc0)]['remove']('hidden'),initializeAdminPanel();}),document[_0x14502b(0x88)](_0x14502b(0x16d))[_0x14502b(0x163)](_0x14502b(0x9c),()=>{const _0x261ea2=_0x14502b;document['getElementById']('adminPanel')[_0x261ea2(0xc0)][_0x261ea2(0x178)](_0x261ea2(0x179));}),document[_0x14502b(0xf1)]('.color-item.clickable')[_0x14502b(0x183)](_0x53b04d=>{const _0x46764c=_0x14502b;_0x53b04d[_0x46764c(0x163)](_0x46764c(0x9c),_0xab2999=>{const _0x5ead02=_0x46764c,_0x2e9946=parseInt(_0xab2999[_0x5ead02(0x10a)][_0x5ead02(0x17b)]['level']),_0x2c0d6f=getColorInfo(_0x2e9946);_0x2c0d6f&&showAlert((_0x2c0d6f[_0x5ead02(0x130)]||_0x5ead02(0x151)+_0x2e9946)+':\x20'+_0x2c0d6f[_0x5ead02(0x8a)],_0x5ead02(0xbb));});});}document[_0x3dc482(0x163)](_0x3dc482(0x103),initializeApp);
