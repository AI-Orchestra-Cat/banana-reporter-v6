const _0x339405=_0x10a0;(function(_0x50f3cd,_0x5add9f){const _0x1b2b55=_0x10a0,_0xcdac2c=_0x50f3cd();while(!![]){try{const _0x145c44=-parseInt(_0x1b2b55(0x268))/0x1+parseInt(_0x1b2b55(0x1fa))/0x2+-parseInt(_0x1b2b55(0x2c1))/0x3*(parseInt(_0x1b2b55(0x298))/0x4)+parseInt(_0x1b2b55(0x2ab))/0x5*(-parseInt(_0x1b2b55(0x1f4))/0x6)+parseInt(_0x1b2b55(0x28f))/0x7*(parseInt(_0x1b2b55(0x20c))/0x8)+parseInt(_0x1b2b55(0x2a6))/0x9+-parseInt(_0x1b2b55(0x1fb))/0xa*(parseInt(_0x1b2b55(0x216))/0xb);if(_0x145c44===_0x5add9f)break;else _0xcdac2c['push'](_0xcdac2c['shift']());}catch(_0x1c13b9){_0xcdac2c['push'](_0xcdac2c['shift']());}}}(_0x5de7,0x6e88b),console[_0x339405(0x2bc)](_0x339405(0x26e)));let currentUser=null,currentImageData=null,analysisResult=null,visualJudgment=null;const COLOR_DATA=[{'level':0x2,'name':'オールグリーン','color':'#2E7D32'},{'level':0x3,'name':_0x339405(0x1f6),'color':_0x339405(0x27e)},{'level':0x4,'name':_0x339405(0x242),'color':_0x339405(0x1d8)},{'level':0x5,'name':_0x339405(0x1e0),'color':_0x339405(0x232)},{'level':0x6,'name':'フルイエロー','color':_0x339405(0x26d)},{'level':0x7,'name':'スター','color':_0x339405(0x1ed)},{'level':0x8,'name':'','color':_0x339405(0x211)},{'level':0x9,'name':'','color':'#795548'}],CHAIN_MASTER=[_0x339405(0x212),_0x339405(0x214),_0x339405(0x2b3),_0x339405(0x1e5),_0x339405(0x1e2),_0x339405(0x1da),'マルエツ',_0x339405(0x2b7),_0x339405(0x237)],STORE_MASTER=['新宿店',_0x339405(0x2b2),'池袋店',_0x339405(0x273),_0x339405(0x229),'川崎店',_0x339405(0x231),_0x339405(0x246),'府中店','その他'],PRODUCT_MASTER=[_0x339405(0x23d),_0x339405(0x26f),_0x339405(0x208),'国産バナナ',_0x339405(0x2bb),_0x339405(0x2ba),'ミニバナナ',_0x339405(0x237)];async function hashPassword(_0x48733b){const _0x540c73=_0x339405,_0xcfed8=new TextEncoder()[_0x540c73(0x222)](_0x48733b),_0x256caf=await crypto[_0x540c73(0x2b9)][_0x540c73(0x228)](_0x540c73(0x20f),_0xcfed8),_0x23959a=Array[_0x540c73(0x248)](new Uint8Array(_0x256caf));return _0x23959a[_0x540c73(0x29f)](_0x4eb6b3=>_0x4eb6b3[_0x540c73(0x22d)](0x10)[_0x540c73(0x22b)](0x2,'0'))[_0x540c73(0x2b8)]('');}const AUTH_CONFIG={'users':[{'id':_0x339405(0x29a),'passHash':_0x339405(0x258),'role':_0x339405(0x29a)}]};async function handleLogin(){const _0x1405f3=_0x339405,_0x45676c=document[_0x1405f3(0x2b5)](_0x1405f3(0x1fd))[_0x1405f3(0x2b1)][_0x1405f3(0x220)](),_0x3c7fde=document[_0x1405f3(0x2b5)]('password')[_0x1405f3(0x2b1)];if(!_0x45676c||!_0x3c7fde){showError('ユーザーIDとパスワードを入力してください');return;}const _0x4f44e1=await hashPassword(_0x3c7fde),_0x3d9602=AUTH_CONFIG[_0x1405f3(0x266)][_0x1405f3(0x1ff)](_0x28dbf0=>_0x28dbf0['id']===_0x45676c&&_0x28dbf0['passHash']===_0x4f44e1);_0x3d9602?(currentUser=_0x3d9602,sessionStorage[_0x1405f3(0x224)](_0x1405f3(0x278),JSON[_0x1405f3(0x23f)](currentUser)),showMainScreen()):showError('ログイン失敗：IDまたはパスワードが違います');}function showError(_0xf3f4ad){const _0x3eca71=_0x339405,_0x1f7d86=document[_0x3eca71(0x2b5)](_0x3eca71(0x230));_0x1f7d86?(_0x1f7d86[_0x3eca71(0x2a4)]=_0xf3f4ad,_0x1f7d86[_0x3eca71(0x200)]['remove']('hidden'),setTimeout(()=>_0x1f7d86['classList'][_0x3eca71(0x1f2)](_0x3eca71(0x277)),0xbb8)):alert(_0xf3f4ad);}function showMainScreen(){const _0x15a714=_0x339405;document[_0x15a714(0x2b5)](_0x15a714(0x1f5))[_0x15a714(0x200)][_0x15a714(0x1f2)](_0x15a714(0x277)),document[_0x15a714(0x2b5)](_0x15a714(0x27c))[_0x15a714(0x200)]['remove'](_0x15a714(0x277));const _0x587f20=document[_0x15a714(0x2b5)](_0x15a714(0x281));_0x587f20&&(_0x587f20[_0x15a714(0x2a4)]=currentUser['id']+'（管理者）'),initializeColorChart();}function initializeColorChart(){const _0x1533d4=_0x339405,_0x6c151f=document[_0x1533d4(0x2b5)]('colorChart');if(!_0x6c151f)return;_0x6c151f['innerHTML']='',COLOR_DATA[_0x1533d4(0x1e3)](_0x5d1383=>{const _0x56d9eb=_0x1533d4,_0x5c0eaa=document[_0x56d9eb(0x2aa)](_0x56d9eb(0x29c));_0x5c0eaa[_0x56d9eb(0x276)]=_0x56d9eb(0x236),_0x5c0eaa['dataset'][_0x56d9eb(0x282)]=_0x5d1383[_0x56d9eb(0x282)];const _0x321212=document[_0x56d9eb(0x2aa)](_0x56d9eb(0x29c));_0x321212['className']=_0x56d9eb(0x24b),_0x321212[_0x56d9eb(0x27f)][_0x56d9eb(0x26b)]=_0x5d1383['color'];const _0x46f602=document['createElement'](_0x56d9eb(0x29c));_0x46f602[_0x56d9eb(0x276)]='color-level',_0x46f602[_0x56d9eb(0x2a4)]=_0x5d1383[_0x56d9eb(0x282)],_0x5c0eaa[_0x56d9eb(0x20d)](_0x321212),_0x5c0eaa['appendChild'](_0x46f602);if(_0x5d1383['name']){const _0x550409=document[_0x56d9eb(0x2aa)]('div');_0x550409[_0x56d9eb(0x276)]='color-name',_0x550409['textContent']=_0x5d1383[_0x56d9eb(0x2a7)],_0x5c0eaa['appendChild'](_0x550409);}_0x6c151f['appendChild'](_0x5c0eaa);});}function handleImageSelect(_0x5bd56c){const _0x89f6c9=_0x339405,_0x170ddc=_0x5bd56c[_0x89f6c9(0x20e)][_0x89f6c9(0x22f)][0x0];if(!_0x170ddc)return;if(!_0x170ddc[_0x89f6c9(0x256)][_0x89f6c9(0x217)](_0x89f6c9(0x247))){alert(_0x89f6c9(0x2bd));return;}const _0x16dded=new FileReader();_0x16dded[_0x89f6c9(0x255)]=function(_0x5827b0){const _0x138a40=_0x89f6c9;currentImageData=_0x5827b0[_0x138a40(0x20e)][_0x138a40(0x275)];const _0x2060ab=document[_0x138a40(0x2b5)](_0x138a40(0x270));_0x2060ab&&(_0x2060ab['innerHTML']=_0x138a40(0x2a9)+_0x5827b0['target'][_0x138a40(0x275)]+_0x138a40(0x280));const _0x195ab6=document['getElementById'](_0x138a40(0x289));_0x195ab6&&(_0x195ab6[_0x138a40(0x25d)]=![]);const _0x2101b1=document['getElementById'](_0x138a40(0x1ec));_0x2101b1&&(_0x2101b1[_0x138a40(0x200)][_0x138a40(0x285)]('hidden'),initializeVisualJudgment());},_0x16dded[_0x89f6c9(0x28e)](_0x170ddc);}function _0x5de7(){const _0x1b5895=['join','subtle','プレミアムバナナ','オーガニックバナナ','log','画像ファイルを選択してください','code3','emailBtn','color','9kFtbgG','resultCard','房（束）','#8BC34A','黄緑色%','ライフ','システムバージョン:\x20v7.0\x0a','不一致','readOnly','\x0a解析日時:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','グリーンチップ','deliveryDate','サミット','forEach','href','ファミリーマート','tagName','clear','\x0a店舗名:\x20','claimUnitPrice','white','.csv','visualJudgment','#FFC107','floor','納品日','\x0a\x0a※添付ファイル\x0a-\x20画像ファイル\x0a-\x20CSVファイル（','parentNode','add','readyState','95262zxqzxd','authScreen','ライトグリーン','resultContent','✅\x20解析完了！\x0a\x0a判定結果:\x20カラー','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>判定一致</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20','263560mclQlK','400sASNMG','目視判定:\x20カラー','userId','<option\x20value=\x22\x22>選択してください</option>','find','classList','解析日時','.csv）\x0a\x0a解析者:\x20','settingsBtn','※詳細設定は開発中です','処理時間ms','緑色%','parse','台湾バナナ','目視メモ','visualJudgmentMemo','画像を選択してください','2069408msMaFO','appendChild','target','SHA-256','onclick','#FF9800','イオン','3.\x20画像ファイルを添付\x0a','セブンイレブン','希望クレーム請求金額','30272LxMRQl','startsWith','exportBtn','createObjectURL','10px','ja-JP','btn\x20btn-info\x20btn-block','\x0a送信番号:\x20本日','青ぶく','backgroundColor','trim','green','encode','SELECT','setItem','insertBefore','目視判定なし','chainName','digest','横浜店','code1','padStart','cameraBtn','toString','change','files','loginError','千葉店','#CDDC39','クレーム種別','reload','ユーザー:\x20','color-item','その他','熟度段階','\x0aチェーン名:\x20','チェーン名','toISOString','袋（パック）','フィリピン産バナナ','スポット%','stringify','mailto:?subject=','1.\x20この後メールアプリが開きます\x0a','ハーフグリーン','innerHTML','&body=','件\x0a\x0a','大宮店','image/','from','replace','addEventListener','color-circle','visual-color-item','褐色%','店舗名','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>判定結果</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>カラー','mailCount_','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','querySelectorAll','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22result-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-label\x22>目視判定</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22result-value\x22>カラー','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','onload','type','解析ピクセル数','5f24eab8e0e8aa6ea81c6af7a38e6a5cd8a17aff0ce70e81b3e88f574b45602c','#f0f0f0','ケース','colorLevel','red','disabled','✅\x20CSV出力完了！\x0a\x0aファイル名:\x20','2.\x20CSVファイルを添付\x0a','日付:\x20','4.\x20宛先を入力して送信\x0a\x0a','onchange','\x0a\x0a【商品情報】\x0a商品名:\x20','その他%','ユニークコード:\x20','users','loading','105159jDepXo','\x0aバナナ品質管理レポート\x0a\x0a【管理コード】\x0a','目視判定','background','未入力','#FFEB3B','app.js\x20loaded\x20-\x20v7.0\x20Complete','エクアドル産バナナ','imagePreview','split','判定一致','品川店','slice','result','className','hidden','currentUser','fileBtn','round','toLocaleString','mainScreen','\x0a\x0a【解析結果】\x0a判定:\x20カラー','#4CAF50','style','\x22\x20style=\x22max-width:\x20100%;\x20max-height:\x20400px;\x20border-radius:\x208px;\x22>','currentUserDisplay','level','📧\x20メール送信','黄ぶく','remove','解析者','cameraInput','banana_report_','analyzeBtn','判定一致:\x20','fileInput','productName','resetBtn','readAsDataURL','21nJXHXu','color-name','汎用コード3','商品名','バナナ品質レポート_','claimQuantity','loginBtn','【操作手順】\x0a','captureDate','444116GpmsrF','storeName','admin','未解析','div','カラー','汎用コード1','map','カラーコード','汎用コード2','button','黄色%','textContent','claimUnit','3983031iRBwFn','name','option','<img\x20src=\x22','createElement','110iJBsZR','claimType','click','getItem','dataset','claimAmount','value','渋谷店','ローソン','selected','getElementById','black','ヨークベニマル'];_0x5de7=function(){return _0x1b5895;};return _0x5de7();}function initializeVisualJudgment(){const _0x228959=_0x339405,_0x59c0a8=document[_0x228959(0x2b5)]('visualColorChart');if(!_0x59c0a8)return;_0x59c0a8[_0x228959(0x243)]='',COLOR_DATA['forEach'](_0x4d9cfe=>{const _0x2b0bf6=_0x228959,_0x578c9c=document[_0x2b0bf6(0x2aa)](_0x2b0bf6(0x29c));_0x578c9c[_0x2b0bf6(0x276)]=_0x2b0bf6(0x24c),_0x578c9c[_0x2b0bf6(0x2af)][_0x2b0bf6(0x282)]=_0x4d9cfe[_0x2b0bf6(0x282)];const _0x31eded=document[_0x2b0bf6(0x2aa)](_0x2b0bf6(0x29c));_0x31eded['className']=_0x2b0bf6(0x24b),_0x31eded[_0x2b0bf6(0x27f)]['background']=_0x4d9cfe[_0x2b0bf6(0x2c0)];const _0x45369a=document['createElement']('div');_0x45369a[_0x2b0bf6(0x276)]='color-level',_0x45369a[_0x2b0bf6(0x2a4)]=_0x4d9cfe[_0x2b0bf6(0x282)];const _0x43a724=document[_0x2b0bf6(0x2aa)](_0x2b0bf6(0x29c));_0x43a724['className']=_0x2b0bf6(0x290),_0x43a724[_0x2b0bf6(0x2a4)]=_0x4d9cfe['name']||'',_0x578c9c[_0x2b0bf6(0x20d)](_0x31eded),_0x578c9c[_0x2b0bf6(0x20d)](_0x45369a),_0x578c9c[_0x2b0bf6(0x20d)](_0x43a724),_0x578c9c[_0x2b0bf6(0x210)]=function(){const _0x2b65aa=_0x2b0bf6;selectVisualJudgment(_0x4d9cfe[_0x2b65aa(0x282)]);},_0x59c0a8['appendChild'](_0x578c9c);});}function selectVisualJudgment(_0x33bfac){const _0x26f505=_0x339405;visualJudgment={'level':_0x33bfac},document[_0x26f505(0x252)]('.visual-color-item')[_0x26f505(0x1e3)](_0x4c0625=>{const _0x561054=_0x26f505;_0x4c0625['classList'][_0x561054(0x285)](_0x561054(0x2b4)),_0x4c0625[_0x561054(0x2af)][_0x561054(0x282)]==_0x33bfac&&_0x4c0625[_0x561054(0x200)][_0x561054(0x1f2)](_0x561054(0x2b4));});}function performAnalysis(){const _0xe3dedb=_0x339405;if(!currentImageData){alert(_0xe3dedb(0x20b));return;}const _0x3908f0=document[_0xe3dedb(0x2b5)](_0xe3dedb(0x289)),_0x380f18=_0x3908f0[_0xe3dedb(0x2a4)];_0x3908f0['textContent']='🔄\x20解析中...',_0x3908f0[_0xe3dedb(0x25d)]=!![],setTimeout(()=>{const _0x4b209c=_0xe3dedb,_0x7f2867=Math[_0x4b209c(0x1ee)](Math['random']()*0x8)+0x2;analysisResult={'colorLevel':_0x7f2867};const _0x4d9044=document['getElementById'](_0x4b209c(0x2c2)),_0x172292=document[_0x4b209c(0x2b5)](_0x4b209c(0x1f7));if(_0x4d9044&&_0x172292){const _0x1780c2=COLOR_DATA[_0x4b209c(0x1ff)](_0x482755=>_0x482755[_0x4b209c(0x282)]===_0x7f2867);let _0xb56ec3='',_0x13fbc2=_0x4b209c(0x2b6);visualJudgment&&(analysisResult[_0x4b209c(0x25b)]===visualJudgment['level']?(_0xb56ec3='一致',_0x13fbc2=_0x4b209c(0x221)):(_0xb56ec3=_0x4b209c(0x1dc),_0x13fbc2=_0x4b209c(0x25c))),_0x172292[_0x4b209c(0x243)]=_0x4b209c(0x24f)+_0x7f2867+'\x20'+_0x1780c2[_0x4b209c(0x2a7)]+_0x4b209c(0x251)+(visualJudgment?_0x4b209c(0x253)+visualJudgment['level']+'\x20'+(COLOR_DATA[_0x4b209c(0x1ff)](_0x56aa18=>_0x56aa18[_0x4b209c(0x282)]===visualJudgment['level'])?.['name']||'')+_0x4b209c(0x1f9)+_0x13fbc2+'\x22>'+_0xb56ec3+_0x4b209c(0x254):'')+_0x4b209c(0x1df),_0x4d9044[_0x4b209c(0x200)][_0x4b209c(0x285)](_0x4b209c(0x277)),alert(_0x4b209c(0x1f8)+_0x7f2867+'\x20'+_0x1780c2['name']+'\x0a'+(visualJudgment?'目視判定:\x20カラー'+visualJudgment[_0x4b209c(0x282)]+'\x0a判定:\x20'+_0xb56ec3:''));}_0x3908f0['textContent']=_0x380f18,_0x3908f0[_0x4b209c(0x25d)]=![];const _0x4dfb23=document[_0x4b209c(0x2b5)](_0x4b209c(0x218));if(_0x4dfb23)_0x4dfb23[_0x4b209c(0x25d)]=![];const _0x2e535b=document[_0x4b209c(0x2b5)](_0x4b209c(0x2bf));if(_0x2e535b)_0x2e535b[_0x4b209c(0x25d)]=![];},0x3e8);}function formatDateForCSV(_0x2d5960){if(!_0x2d5960)return'';return _0x2d5960['replace'](/-/g,'/');}function exportCSV(){const _0x2d7c49=_0x339405,_0x5e84e0=[_0x2d7c49(0x233),_0x2d7c49(0x1ef),'撮影日',_0x2d7c49(0x292),_0x2d7c49(0x23a),_0x2d7c49(0x24e),'数量','単位',_0x2d7c49(0x29e),_0x2d7c49(0x2a1),_0x2d7c49(0x291),_0x2d7c49(0x215),_0x2d7c49(0x2a0),_0x2d7c49(0x238),_0x2d7c49(0x206),_0x2d7c49(0x1d9),_0x2d7c49(0x2a3),_0x2d7c49(0x23e),_0x2d7c49(0x24d),_0x2d7c49(0x264),_0x2d7c49(0x257),_0x2d7c49(0x205),_0x2d7c49(0x26a),_0x2d7c49(0x209),_0x2d7c49(0x272),_0x2d7c49(0x286),_0x2d7c49(0x201)];let _0x2dc752='';if(visualJudgment){const _0x5255a9=COLOR_DATA['find'](_0x3b4d15=>_0x3b4d15[_0x2d7c49(0x282)]===visualJudgment[_0x2d7c49(0x282)]);_0x2dc752=_0x2d7c49(0x29d)+visualJudgment[_0x2d7c49(0x282)]+(_0x5255a9?.[_0x2d7c49(0x2a7)]||'');}let _0x36bc72='';if(analysisResult&&visualJudgment)_0x36bc72=analysisResult['colorLevel']===visualJudgment[_0x2d7c49(0x282)]?'一致':_0x2d7c49(0x1dc);else analysisResult&&!visualJudgment?_0x36bc72=_0x2d7c49(0x226):_0x36bc72=_0x2d7c49(0x29b);const _0x50f393=[document[_0x2d7c49(0x2b5)](_0x2d7c49(0x2ac))?.['value']||'',formatDateForCSV(document['getElementById']('deliveryDate')?.[_0x2d7c49(0x2b1)])||'',formatDateForCSV(document[_0x2d7c49(0x2b5)](_0x2d7c49(0x297))?.[_0x2d7c49(0x2b1)])||'',document['getElementById']('productName')?.['value']||'',document[_0x2d7c49(0x2b5)]('chainName')?.[_0x2d7c49(0x2b1)]||'',document[_0x2d7c49(0x2b5)](_0x2d7c49(0x299))?.[_0x2d7c49(0x2b1)]||'',document['getElementById'](_0x2d7c49(0x294))?.[_0x2d7c49(0x2b1)]||'',document[_0x2d7c49(0x2b5)](_0x2d7c49(0x2a5))?.[_0x2d7c49(0x2b1)]||'',document['getElementById'](_0x2d7c49(0x22a))?.[_0x2d7c49(0x2b1)]||'',document['getElementById']('code2')?.['value']||'',document['getElementById'](_0x2d7c49(0x2be))?.[_0x2d7c49(0x2b1)]||'',document['getElementById'](_0x2d7c49(0x2b0))?.[_0x2d7c49(0x2b1)]||'',analysisResult?.['colorLevel']||'',COLOR_DATA['find'](_0x1ac293=>_0x1ac293['level']===analysisResult?.[_0x2d7c49(0x25b)])?.[_0x2d7c49(0x2a7)]||'','0','0','0','0','0','0','0','0',_0x2dc752,document[_0x2d7c49(0x2b5)](_0x2d7c49(0x20a))?.['value']||'',_0x36bc72,currentUser?.['id']||'',new Date()[_0x2d7c49(0x27b)]('ja-JP')],_0x16a8fe='\ufeff'+_0x5e84e0[_0x2d7c49(0x2b8)](',')+'\x0a'+_0x50f393['map'](_0x123777=>'\x22'+_0x123777+'\x22')['join'](','),_0x4fb702=new Blob([_0x16a8fe],{'type':'text/csv;charset=utf-8;'}),_0x1ac863=URL[_0x2d7c49(0x219)](_0x4fb702),_0x260124=document['createElement']('a');_0x260124[_0x2d7c49(0x1e4)]=_0x1ac863;const _0x52414b=_0x2d7c49(0x288)+new Date()[_0x2d7c49(0x23b)]()[_0x2d7c49(0x274)](0x0,0xa)+_0x2d7c49(0x1eb);_0x260124['download']=_0x52414b,_0x260124['click'](),alert(_0x2d7c49(0x25e)+_0x52414b+'\x0aダウンロードフォルダを確認してください。');}function getTodayMailCount(){const _0x32a038=_0x339405,_0x370bdc=new Date()[_0x32a038(0x23b)]()[_0x32a038(0x274)](0x0,0xa),_0x140206=_0x32a038(0x250)+currentUser['id']+'_'+_0x370bdc,_0x35a543=localStorage['getItem'](_0x140206)||'0';return parseInt(_0x35a543);}function _0x10a0(_0x1a6411,_0xbd7c83){const _0x5de7da=_0x5de7();return _0x10a0=function(_0x10a0e4,_0x11f928){_0x10a0e4=_0x10a0e4-0x1d8;let _0x5eb43a=_0x5de7da[_0x10a0e4];return _0x5eb43a;},_0x10a0(_0x1a6411,_0xbd7c83);}function incrementMailCount(){const _0x11926e=_0x339405,_0xb564d2=new Date()[_0x11926e(0x23b)]()[_0x11926e(0x274)](0x0,0xa),_0x433faf=_0x11926e(0x250)+currentUser['id']+'_'+_0xb564d2,_0x244586=getTodayMailCount();return localStorage[_0x11926e(0x224)](_0x433faf,(_0x244586+0x1)[_0x11926e(0x22d)]()),_0x244586+0x1;}function sendEmail(){const _0x4ef766=_0x339405;if(!analysisResult){alert('解析を実行してからメール送信してください');return;}const _0x3d21f4=new Date(),_0x113c8e=_0x3d21f4[_0x4ef766(0x23b)]()[_0x4ef766(0x274)](0x0,0xa)[_0x4ef766(0x249)](/-/g,''),_0x3959bb=incrementMailCount(),_0x5bda96=''+currentUser['id']+_0x113c8e+String(_0x3959bb)['padStart'](0x3,'0');alert('📧\x20メール送信について\x0a\x0a'+(_0x4ef766(0x265)+_0x5bda96+'\x0a\x0a')+_0x4ef766(0x296)+_0x4ef766(0x241)+_0x4ef766(0x25f)+_0x4ef766(0x213)+_0x4ef766(0x261)+'※自動添付にはサーバー実装が必要です');const _0x9639b0=_0x4ef766(0x293)+_0x5bda96,_0x5e4dc7=analysisResult&&visualJudgment?analysisResult[_0x4ef766(0x25b)]===visualJudgment['level']?'一致':_0x4ef766(0x1dc):'',_0x464e47=(_0x4ef766(0x269)+_0x5bda96+_0x4ef766(0x27d)+analysisResult[_0x4ef766(0x25b)]+'\x20'+(COLOR_DATA[_0x4ef766(0x1ff)](_0x56c318=>_0x56c318[_0x4ef766(0x282)]===analysisResult[_0x4ef766(0x25b)])?.[_0x4ef766(0x2a7)]||'')+'\x0a'+(visualJudgment?_0x4ef766(0x1fc)+visualJudgment[_0x4ef766(0x282)]+'\x20'+(COLOR_DATA[_0x4ef766(0x1ff)](_0x1af773=>_0x1af773[_0x4ef766(0x282)]===visualJudgment[_0x4ef766(0x282)])?.['name']||''):'')+'\x0a'+(visualJudgment?_0x4ef766(0x28a)+_0x5e4dc7:'')+_0x4ef766(0x263)+(document[_0x4ef766(0x2b5)](_0x4ef766(0x28c))?.[_0x4ef766(0x2b1)]||_0x4ef766(0x26c))+_0x4ef766(0x239)+(document[_0x4ef766(0x2b5)](_0x4ef766(0x227))?.[_0x4ef766(0x2b1)]||_0x4ef766(0x26c))+_0x4ef766(0x1e8)+(document[_0x4ef766(0x2b5)](_0x4ef766(0x299))?.[_0x4ef766(0x2b1)]||_0x4ef766(0x26c))+_0x4ef766(0x1f0)+_0x5bda96+_0x4ef766(0x202)+currentUser['id']+_0x4ef766(0x1de)+new Date()[_0x4ef766(0x27b)](_0x4ef766(0x21b))+_0x4ef766(0x21d)+_0x3959bb+'件目\x0a\x20\x20\x20\x20')[_0x4ef766(0x220)]();window['open'](_0x4ef766(0x240)+encodeURIComponent(_0x9639b0)+_0x4ef766(0x244)+encodeURIComponent(_0x464e47));}function showSettings(){const _0x660b23=_0x339405,_0x3b8e98=getTodayMailCount(),_0x40d4cc=new Date()[_0x660b23(0x23b)]()[_0x660b23(0x274)](0x0,0xa);alert('⚙️\x20設定画面\x0a\x0a'+_0x660b23(0x1db)+_0x660b23(0x235)+currentUser['id']+'\x0a'+'ロール:\x20管理者\x0a\x0a'+'【本日の統計】\x0a'+(_0x660b23(0x260)+_0x40d4cc+'\x0a')+('メール送信回数:\x20'+_0x3b8e98+_0x660b23(0x245))+_0x660b23(0x204));}function handleLogout(){const _0x2fe8f2=_0x339405;sessionStorage[_0x2fe8f2(0x1e7)](),location[_0x2fe8f2(0x234)]();}function handleReset(){const _0x48421f=_0x339405;location[_0x48421f(0x234)]();}function calculateClaimAmount(){const _0x1c4a10=_0x339405,_0x20338a=parseFloat(document[_0x1c4a10(0x2b5)]('claimQuantity')?.['value'])||0x0,_0x8ccfed=parseFloat(document[_0x1c4a10(0x2b5)](_0x1c4a10(0x1e9))?.[_0x1c4a10(0x2b1)])||0x0,_0x36fa2e=document[_0x1c4a10(0x2b5)](_0x1c4a10(0x2b0));_0x36fa2e&&(_0x20338a>0x0&&_0x8ccfed>0x0?(_0x36fa2e[_0x1c4a10(0x2b1)]=Math[_0x1c4a10(0x27a)](_0x20338a*_0x8ccfed),_0x36fa2e['readOnly']=!![],_0x36fa2e['style'][_0x1c4a10(0x21f)]=_0x1c4a10(0x259)):(_0x36fa2e[_0x1c4a10(0x1dd)]=![],_0x36fa2e[_0x1c4a10(0x27f)][_0x1c4a10(0x21f)]=_0x1c4a10(0x1ea)));}function initApp(){const _0x29a38c=_0x339405,_0x4ce753=sessionStorage[_0x29a38c(0x2ae)]('currentUser');_0x4ce753&&(currentUser=JSON[_0x29a38c(0x207)](_0x4ce753),showMainScreen());const _0x4ed6a9=document[_0x29a38c(0x2b5)](_0x29a38c(0x295));_0x4ed6a9&&(_0x4ed6a9[_0x29a38c(0x210)]=handleLogin);const _0x529d52=document[_0x29a38c(0x2b5)]('logoutBtn');_0x529d52&&(_0x529d52[_0x29a38c(0x210)]=handleLogout);const _0x480191=document[_0x29a38c(0x2b5)](_0x29a38c(0x22c));_0x480191&&(_0x480191[_0x29a38c(0x210)]=function(){const _0x2296d4=_0x29a38c;document[_0x2296d4(0x2b5)]('cameraInput')[_0x2296d4(0x2ad)]();});const _0x2d7f37=document[_0x29a38c(0x2b5)](_0x29a38c(0x279));_0x2d7f37&&(_0x2d7f37[_0x29a38c(0x210)]=function(){const _0x3cab4d=_0x29a38c;document['getElementById'](_0x3cab4d(0x28b))['click']();});const _0x462706=document['getElementById'](_0x29a38c(0x287));_0x462706&&(_0x462706[_0x29a38c(0x262)]=handleImageSelect);const _0x2587ee=document[_0x29a38c(0x2b5)](_0x29a38c(0x28b));_0x2587ee&&(_0x2587ee[_0x29a38c(0x262)]=handleImageSelect);const _0x41f937=document[_0x29a38c(0x2b5)](_0x29a38c(0x289));_0x41f937&&(_0x41f937[_0x29a38c(0x210)]=performAnalysis);const _0x4eab78=document[_0x29a38c(0x2b5)](_0x29a38c(0x218));_0x4eab78&&(_0x4eab78[_0x29a38c(0x210)]=exportCSV);let _0x1ca861=document['getElementById'](_0x29a38c(0x2bf));if(!_0x1ca861&&_0x4eab78)_0x1ca861=document[_0x29a38c(0x2aa)](_0x29a38c(0x2a2)),_0x1ca861['id']=_0x29a38c(0x2bf),_0x1ca861[_0x29a38c(0x276)]=_0x29a38c(0x21c),_0x1ca861[_0x29a38c(0x2a4)]=_0x29a38c(0x283),_0x1ca861[_0x29a38c(0x25d)]=!![],_0x1ca861[_0x29a38c(0x210)]=sendEmail,_0x1ca861[_0x29a38c(0x27f)]['marginTop']=_0x29a38c(0x21a),_0x4eab78[_0x29a38c(0x1f1)][_0x29a38c(0x225)](_0x1ca861,_0x4eab78['nextSibling']);else _0x1ca861&&(_0x1ca861[_0x29a38c(0x210)]=sendEmail);const _0x492b2a=document[_0x29a38c(0x2b5)](_0x29a38c(0x28d));_0x492b2a&&(_0x492b2a[_0x29a38c(0x210)]=handleReset);const _0x1e191=document['getElementById'](_0x29a38c(0x203));_0x1e191&&(_0x1e191[_0x29a38c(0x210)]=showSettings);const _0x52ef32=new Date()['toISOString']()[_0x29a38c(0x271)]('T')[0x0],_0x22ace9=document['getElementById'](_0x29a38c(0x1e1));if(_0x22ace9)_0x22ace9[_0x29a38c(0x2b1)]=_0x52ef32;const _0x5ac7bd=document[_0x29a38c(0x2b5)](_0x29a38c(0x297));if(_0x5ac7bd)_0x5ac7bd[_0x29a38c(0x2b1)]=_0x52ef32;const _0x3bdc13=['過熟','未熟','くされ','おされ＆傷','カビ',_0x29a38c(0x21e),_0x29a38c(0x284),_0x29a38c(0x237)],_0xaa5f0c=document['getElementById'](_0x29a38c(0x2ac));_0xaa5f0c&&_0xaa5f0c['tagName']===_0x29a38c(0x223)&&(_0xaa5f0c['innerHTML']=_0x29a38c(0x1fe),_0x3bdc13['forEach'](_0x4a9132=>{const _0x5008dd=_0x29a38c,_0x51e958=document[_0x5008dd(0x2aa)](_0x5008dd(0x2a8));_0x51e958[_0x5008dd(0x2b1)]=_0x4a9132,_0x51e958['textContent']=_0x4a9132,_0xaa5f0c[_0x5008dd(0x20d)](_0x51e958);}));const _0x201aa6=['本（個別）',_0x29a38c(0x2c3),_0x29a38c(0x23c),'箱（ボックス）',_0x29a38c(0x25a),'パレット','コンテナ','キログラム',_0x29a38c(0x237)],_0x2bf4e9=document[_0x29a38c(0x2b5)](_0x29a38c(0x2a5));_0x2bf4e9&&_0x2bf4e9[_0x29a38c(0x1e6)]===_0x29a38c(0x223)&&(_0x2bf4e9[_0x29a38c(0x243)]=_0x29a38c(0x1fe),_0x201aa6[_0x29a38c(0x1e3)](_0x16e369=>{const _0x2f556f=_0x29a38c,_0x1d49fd=document['createElement'](_0x2f556f(0x2a8));_0x1d49fd['value']=_0x16e369,_0x1d49fd[_0x2f556f(0x2a4)]=_0x16e369;if(_0x16e369===_0x2f556f(0x23c))_0x1d49fd[_0x2f556f(0x2b4)]=!![];_0x2bf4e9[_0x2f556f(0x20d)](_0x1d49fd);}));const _0x53b09b=document[_0x29a38c(0x2b5)](_0x29a38c(0x227));_0x53b09b&&_0x53b09b['tagName']==='SELECT'&&(_0x53b09b[_0x29a38c(0x243)]=_0x29a38c(0x1fe),CHAIN_MASTER[_0x29a38c(0x1e3)](_0x1f2b83=>{const _0x30756d=_0x29a38c,_0x437770=document[_0x30756d(0x2aa)](_0x30756d(0x2a8));_0x437770[_0x30756d(0x2b1)]=_0x1f2b83,_0x437770[_0x30756d(0x2a4)]=_0x1f2b83,_0x53b09b[_0x30756d(0x20d)](_0x437770);}));const _0x2feaa2=document[_0x29a38c(0x2b5)]('storeName');_0x2feaa2&&_0x2feaa2[_0x29a38c(0x1e6)]===_0x29a38c(0x223)&&(_0x2feaa2['innerHTML']=_0x29a38c(0x1fe),STORE_MASTER[_0x29a38c(0x1e3)](_0x1dfdb1=>{const _0x217450=_0x29a38c,_0x249781=document[_0x217450(0x2aa)](_0x217450(0x2a8));_0x249781[_0x217450(0x2b1)]=_0x1dfdb1,_0x249781[_0x217450(0x2a4)]=_0x1dfdb1,_0x2feaa2['appendChild'](_0x249781);}));const _0x4368c0=document[_0x29a38c(0x2b5)]('productName');_0x4368c0&&_0x4368c0[_0x29a38c(0x1e6)]===_0x29a38c(0x223)&&(_0x4368c0[_0x29a38c(0x243)]=_0x29a38c(0x1fe),PRODUCT_MASTER[_0x29a38c(0x1e3)](_0x569ced=>{const _0x7ef18f=_0x29a38c,_0x2cb589=document[_0x7ef18f(0x2aa)]('option');_0x2cb589[_0x7ef18f(0x2b1)]=_0x569ced,_0x2cb589['textContent']=_0x569ced,_0x4368c0['appendChild'](_0x2cb589);}));const _0x1fb413=document[_0x29a38c(0x2b5)](_0x29a38c(0x294));_0x1fb413&&_0x1fb413['addEventListener']('change',calculateClaimAmount);const _0x45bd3c=document[_0x29a38c(0x2b5)](_0x29a38c(0x1e9));_0x45bd3c&&_0x45bd3c[_0x29a38c(0x24a)](_0x29a38c(0x22e),calculateClaimAmount);}document[_0x339405(0x1f3)]===_0x339405(0x267)?document[_0x339405(0x24a)]('DOMContentLoaded',initApp):initApp();
